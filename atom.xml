<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>t-hiroyoshi-blog</title>
  <subtitle>A tech blog</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://t-hiroyoshi.github.io/"/>
  <updated>2016-11-18T04:20:52.000Z</updated>
  <id>http://t-hiroyoshi.github.io/</id>
  
  <author>
    <name>Hiroyoshi Takahashi</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>yarn global addã—ãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ãƒ‘ã‚¹ã‚’é€šã™</title>
    <link href="http://t-hiroyoshi.github.io/yarn-global-link/"/>
    <id>http://t-hiroyoshi.github.io/yarn-global-link/</id>
    <published>2016-11-18T04:17:12.000Z</published>
    <updated>2016-11-18T04:20:52.000Z</updated>
    
    <content type="html"><![CDATA[<p><code>yarn global add</code>ã—ã¦ã‚‚è‡ªå‹•ã§ãƒ‘ã‚¹é€šã—ã¦ãã‚Œãªã„ã£ã½ã„<a href="https://github.com/yarnpkg/yarn/issues/1585" target="_blank" rel="external">ãƒã‚°</a>ãŒã‚ã‚‹ã‚ˆã†ã§</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">$ yarn global add create-react-app</div><div class="line">$ create-react-app</div><div class="line">zsh: <span class="built_in">command</span> not found: create-react-app</div></pre></td></tr></table></figure>
<p>ã£ã¦ãªã£ãŸã®ã§~/.zshrcã«ä»¥ä¸‹ã‚’è¿½åŠ ã—ã¾ã—ãŸã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">export PATH=&quot;$PATH:`yarn global bin`&quot;</div></pre></td></tr></table></figure>
<p>ã‚‚ã†ä¸€å›ã‚„ã£ã¦ã¿ã‚‹ã¨è¡Œã‘ã¾ã™ã€‚</p>
<figure class="highlight dsconfig"><table><tr><td class="code"><pre><div class="line">$ <span class="built_in">create-react-app</span></div><div class="line"><span class="string">Usage:</span> <span class="built_in">create-react-app</span> &lt;<span class="string">project-directory&gt;</span> [<span class="built_in">--verbose]</span></div></pre></td></tr></table></figure>
<p><code>yarn global</code>ã«ã¯çµæ§‹ãƒã‚°ãŒã‚ã‚‹ã£ã½ã„ã®ã§æ—©ãå®‰å®šã—ã¦ã»ã—ã„ã§ã™ã­ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;yarn global add&lt;/code&gt;ã—ã¦ã‚‚è‡ªå‹•ã§ãƒ‘ã‚¹é€šã—ã¦ãã‚Œãªã„ã£ã½ã„&lt;a href=&quot;https://github.com/yarnpkg/yarn/issues/1585&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ãƒã‚°&lt;/a&gt;
    
    </summary>
    
    
      <category term="javascript" scheme="http://t-hiroyoshi.github.io/tags/javascript/"/>
    
      <category term="reactjs" scheme="http://t-hiroyoshi.github.io/tags/reactjs/"/>
    
  </entry>
  
  <entry>
    <title>webpackã§ä½¿ãˆã‚‹SourceMapä¸€è¦§ã¾ã¨ã‚</title>
    <link href="http://t-hiroyoshi.github.io/webpack-devtool/"/>
    <id>http://t-hiroyoshi.github.io/webpack-devtool/</id>
    <published>2016-11-03T15:41:46.000Z</published>
    <updated>2016-11-18T04:19:54.000Z</updated>
    
    <content type="html"><![CDATA[<ul>
<li><code>eval</code>: ãã‚Œãã‚Œã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯evalã¨ã—ã¦å®Ÿè¡Œã•ã‚Œ<code>//@ sourceURL</code>ãŒä»˜ã‘ã‚‰ã‚Œã¾ã™</li>
<li><code>source-map</code>: SourceMapã‚’å®Œå…¨ã«åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ç”Ÿæˆã—ã¾ã™ã€‚<code>output.sourceMapFilename</code>ã§è¨­å®šãŒå¯èƒ½ã§ã™</li>
<li><code>hidden-source-map</code>: <code>source-map</code>ã¨åŒæ§˜SourceMapã‚’åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ç”Ÿæˆã—ã¾ã™ãŒãƒãƒ³ãƒ‰ãƒ«ã«å‚ç…§ã‚³ãƒ¡ãƒ³ãƒˆã‚’å«ã¿ã¾ã›ã‚“</li>
<li><code>inline-source-map</code>: SourceMapã¯DataUrlã¨ã—ã¦ãƒãƒ³ãƒ‰ãƒ«ã•ã‚Œã¾ã™</li>
<li><code>eval-source-map</code>: ãã‚Œãã‚Œã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯evalã¨ã—ã¦å®Ÿè¡Œã•ã‚Œã€SourceMapã¯DataUrlã¨ã—ã¦evalã«è¿½åŠ ã•ã‚Œã¾ã™</li>
<li><code>cheap-source-map</code>: SourceMapã¯åˆ—ã‚’ç„¡è¦–ã—ã¦ç”Ÿæˆã•ã‚Œã¾ã™ã€‚loaderã§èª­ã¿è¾¼ã¾ã‚ŒãŸSourceMapã¯ç„¡è¦–ã•ã‚Œã¾ã™ã€‚</li>
<li><code>cheap-module-source-map</code>: SourceMapã¯åˆ—ã‚’ç„¡è¦–ã—ã¦ç”Ÿæˆã•ã‚Œã¾ã™ã€‚ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚½ãƒ¼ã‚¹ãƒãƒƒãƒ—ã‚’1è¡Œã«1ã¤ã®ãƒãƒƒãƒ”ãƒ³ã‚°ã«å˜ç´”åŒ–ã•ã‚Œã¾ã™ã€‚</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">devtool</th>
<th style="text-align:center">build</th>
<th style="text-align:center">rebuild</th>
<th style="text-align:center">production</th>
<th style="text-align:center">quality</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">eval</td>
<td style="text-align:center">+++</td>
<td style="text-align:center">+++</td>
<td style="text-align:center">no</td>
<td style="text-align:center">generated code</td>
</tr>
<tr>
<td style="text-align:center">cheap-eval-source-map</td>
<td style="text-align:center">+</td>
<td style="text-align:center">++</td>
<td style="text-align:center">no</td>
<td style="text-align:center">transformed code (lines only)</td>
</tr>
<tr>
<td style="text-align:center">cheap-source-map</td>
<td style="text-align:center">+</td>
<td style="text-align:center">o</td>
<td style="text-align:center">yes</td>
<td style="text-align:center">transformed code (lines only)</td>
</tr>
<tr>
<td style="text-align:center">cheap-module-eval-source-map</td>
<td style="text-align:center">o</td>
<td style="text-align:center">++</td>
<td style="text-align:center">no</td>
<td style="text-align:center">original source (lines only)</td>
</tr>
<tr>
<td style="text-align:center">cheap-module-source-map</td>
<td style="text-align:center">o</td>
<td style="text-align:center">-</td>
<td style="text-align:center">yes</td>
<td style="text-align:center">original source (lines only)</td>
</tr>
<tr>
<td style="text-align:center">eval-source-map</td>
<td style="text-align:center">â€“</td>
<td style="text-align:center">+</td>
<td style="text-align:center">no</td>
<td style="text-align:center">original source</td>
</tr>
<tr>
<td style="text-align:center">source-map</td>
<td style="text-align:center">â€“</td>
<td style="text-align:center">â€“</td>
<td style="text-align:center">yes</td>
<td style="text-align:center">original source</td>
</tr>
</tbody>
</table>
]]></content>
    
    <summary type="html">
    
      &lt;ul&gt;
&lt;li&gt;&lt;code&gt;eval&lt;/code&gt;: ãã‚Œãã‚Œã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯evalã¨ã—ã¦å®Ÿè¡Œã•ã‚Œ&lt;code&gt;//@ sourceURL&lt;/code&gt;ãŒä»˜ã‘ã‚‰ã‚Œã¾ã™&lt;/li&gt;
&lt;li&gt;&lt;code&gt;source-map&lt;/code&gt;: SourceMapã‚’å®Œå…¨ã«åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã¨ã—ã¦ç”Ÿ
    
    </summary>
    
    
      <category term="javascript" scheme="http://t-hiroyoshi.github.io/tags/javascript/"/>
    
      <category term="webpack" scheme="http://t-hiroyoshi.github.io/tags/webpack/"/>
    
  </entry>
  
  <entry>
    <title>Goã®JSON API Serverã§ã‚†ã‚‹ãµã‚JSON responseã‚’è¿”ã™æ–¹æ³•</title>
    <link href="http://t-hiroyoshi.github.io/go-yuru-json/"/>
    <id>http://t-hiroyoshi.github.io/go-yuru-json/</id>
    <published>2016-10-25T10:24:09.000Z</published>
    <updated>2016-11-03T15:47:17.000Z</updated>
    
    <content type="html"><![CDATA[<p>æœ€è¿‘Goã‚’API Gateway(Aggregator)ã¨ã—ã¦ã„ã‚‹ç’°å¢ƒã§é–‹ç™ºã‚’è¡Œãªã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€å‘¼ã³å‡ºã—å…ˆã®Serviceã®å®Ÿè£…ãŒçµ‚ã‚ã£ã¦ã„ãªãã¦ã‚‚Clientã§ã¨ã‚Šã‚ãˆãšJSONã®responseãŒæ¬²ã—ã„ã¨ã„ã†çŠ¶æ³ãŒã‚ã‚Šã¾ã—ãŸã€‚</p>
<p>JSONã®Unmarshalã«ã¤ã„ã¦ã¯<a href="https://www.kaoriya.net/blog/2016/06/25/" target="_blank" rel="external">golangã¯ã‚†ã‚‹ãµã‚ã«JSONã‚’æ‰±ãˆã¾ãã™!</a>ã¨ã„ã†è¨˜äº‹ãŒæœ‰ã£ãŸã®ã§ã™ãŒã€ã‚†ã‚‹ãµã‚Marshalã«ã¤ã„ã¦ã¯æƒ…å ±ãŒã‚ã‚Šã¾ã›ã‚“ã§ã—ãŸã€‚</p>
<p>ã§ã™ãŒè€ƒãˆã¦ã¿ã‚Œã°json.Marshal()ã™ã‚‹ã¨<code>[]byte</code>å‹ã«ãªã‚‹ã®ã§ãã‚Œã‚’åˆã‚ã‹ã‚‰ä½œã£ã¦ã‚ã’ã‚Œã°ã‚ˆã‹ã£ãŸã§ã™ã€‚<br>ã¾ã‚ã‚‚ã¡ã‚ã‚“ã“ã‚Œã§ã¯Goã®è‰¯ã„ã¨ã“ã‚ã‚’æ¨ã¦ã¦ã„ã‚‹ã‚ˆã†ãªã‚‚ã®ã§ã™ãŒã€é–‹ç™ºä¸­ã®ã¨ã‚Šã‚ãˆãšã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã«ã¯æ‰‹è»½ã§è‰¯ã„ã¨æ€ã„ã¾ã—ãŸã€‚</p>
<figure class="highlight go"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> main</div><div class="line"></div><div class="line"><span class="keyword">import</span> (</div><div class="line">    <span class="string">"fmt"</span></div><div class="line">    <span class="string">"net/http"</span></div><div class="line">)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">jsonResponse</span><span class="params">(rw http.ResponseWriter, req *http.Request)</span></span> &#123;</div><div class="line">    response := []<span class="keyword">byte</span>(<span class="string">`</span></div><div class="line">        &#123;</div><div class="line">          "status": "success",</div><div class="line">          "user":</div><div class="line">            &#123;</div><div class="line">              "id": "2d7b8fe1-1e63-4c3b-83b9-46274554e822",</div><div class="line">              "name": "t-hiroyoshi",</div><div class="line">              "birthday": "1993-09-06T11:22:33.496Z"</div><div class="line">            &#125;</div><div class="line">        &#125;</div><div class="line">    `)</div><div class="line"></div><div class="line">    <span class="keyword">defer</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</div><div class="line">        rw.Header().Set(<span class="string">"Content-Type"</span>, <span class="string">"application/json"</span>)</div><div class="line">        fmt.Fprint(rw, <span class="keyword">string</span>(response))</div><div class="line">    &#125;()</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</div><div class="line">    http.HandleFunc(<span class="string">"/json"</span>, jsonResponse)</div><div class="line">    http.ListenAndServe(<span class="string">":8080"</span>, <span class="literal">nil</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;æœ€è¿‘Goã‚’API Gateway(Aggregator)ã¨ã—ã¦ã„ã‚‹ç’°å¢ƒã§é–‹ç™ºã‚’è¡Œãªã£ã¦ã„ã‚‹ã®ã§ã™ãŒã€å‘¼ã³å‡ºã—å…ˆã®Serviceã®å®Ÿè£…ãŒçµ‚ã‚ã£ã¦ã„ãªãã¦ã‚‚Clientã§ã¨ã‚Šã‚ãˆãšJSONã®responseãŒæ¬²ã—ã„ã¨ã„ã†çŠ¶æ³ãŒã‚ã‚Šã¾ã—ãŸã€‚&lt;/p&gt;
&lt;p&gt;JSONã®Unmarsh
    
    </summary>
    
    
      <category term="server" scheme="http://t-hiroyoshi.github.io/tags/server/"/>
    
      <category term="go" scheme="http://t-hiroyoshi.github.io/tags/go/"/>
    
  </entry>
  
  <entry>
    <title>Yarnã§react-tutorialã‚’å‹•ã‹ã™</title>
    <link href="http://t-hiroyoshi.github.io/try-yarn/"/>
    <id>http://t-hiroyoshi.github.io/try-yarn/</id>
    <published>2016-10-13T02:28:33.000Z</published>
    <updated>2016-10-13T07:44:51.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Yarnã¨ã¯"><a href="#Yarnã¨ã¯" class="headerlink" title="Yarnã¨ã¯"></a>Yarnã¨ã¯</h1><p><a href="https://github.com/yarnpkg/yarn" target="_blank" rel="external">Yarn</a>ã¨ã¯ã¤ã„å…ˆæ—¥å…¬é–‹ã•ã‚ŒãŸã€Facebook, Exponent, Google, Tildeã«ã‚ˆã£ã¦é–‹ç™ºã•ã‚ŒãŸã‚ªãƒ¼ãƒ—ãƒ³ã‚½ãƒ¼ã‚¹ã®æ–°ã—ã„JavaScriptãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã§ã™ã€‚</p>
<p>ç¾åœ¨JavaScriptã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãƒãƒãƒ¼ã‚¸ãƒ£ã¨ã—ã¦ã™ã§ã«npmãŒå­˜åœ¨ã—ã¦ã„ã¾ã™ãŒã€Facebookã»ã©ã®è¦æ¨¡æ„Ÿã«ãªã‚‹ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã‚„ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã«å½±éŸ¿ãŒå‡ºã¦ããŸã®ã§ä¸€ã‹ã‚‰æ–°ã—ãYarnã‚’<a href="https://code.facebook.com/posts/1840075619545360" target="_blank" rel="external">ä½œã£ãŸã‚ˆã†</a>ã§ã™ã€‚<br>æ–°ã—ã„ã¨ã„ã£ã¦ã‚‚npmã¨äº’æ›æ€§ã‚’æŒã¤package.jsonã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã‚’è¡Œã„ã€npm registryä¸Šã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã®ã§ä½¿ã†å´ã¨ã—ã¦ã¯æ—©ãã¦å›ºã„npmãã‚‰ã„ã«æ€ã£ãŸæ–¹ãŒè‰¯ã„ã‹ã‚‚ã—ã‚Œãªã„ã§ã™ã€‚</p>
<p>ä¸­ã®äººã‚’ã¿ã¦ã¿ã‚‹ã¨<a href="https://github.com/babel/babel" target="_blank" rel="external">Babel</a>ã‚„<a href="https://github.com/lerna/lerna" target="_blank" rel="external">Lerna</a>ã‚’ä½œã£ãŸSebastianã•ã‚“ãŒã‚³ã‚¢ã£ã½ãã¦ã“ã®äººã‚„ã£ã±ã‚Šã™ã”ã„ãªã£ã¦æ€ã„ã¾ã—ãŸã€‚</p>
<p>ç‰¹å¾´ã‚’ã–ã£ãã‚Šã¾ã¨ã‚ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜ã§ã™</p>
<ul>
<li>Ultra Fast: ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å…¨ã¦ãƒ­ãƒ¼ã‚«ãƒ«ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã•ã‚Œã¦ä¸¦åˆ—ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹</li>
<li>Mega Secure: ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚ŒãŸãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯å®Ÿè¡Œã•ã‚Œã‚‹å‰ã«ãƒã‚§ãƒƒã‚¯ã‚µãƒ ã•ã‚Œã‚‹</li>
<li>Super Reliable: lockfileã‚’ä½¿ã£ã¦ã„ã¦ä»–ã®ã‚·ã‚¹ãƒ†ãƒ ã§ã‚‚å…¨ãåŒã˜ã‚‚ã®ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹ã“ã¨ãŒä¿è¨¼ã•ã‚Œã¦ã„ã‚‹</li>
<li>More emojis: ğŸˆ</li>
</ul>
<h1 id="è©¦ã™"><a href="#è©¦ã™" class="headerlink" title="è©¦ã™"></a>è©¦ã™</h1><p>æœ¬å½“ã¯<a href="https://github.com/facebookincubator/create-react-app" target="_blank" rel="external">create-react-app</a>ã‚’å‹•ã‹ã—ãŸã‹ã£ãŸã®ã§ã™ãŒã¾ã <a href="https://github.com/facebookincubator/create-react-app/issues/896" target="_blank" rel="external">å¯¾å¿œã—ã¦ã„ãªã‹ã£ãŸ</a>ã®ã§<a href="https://github.com/reactjs/react-tutorial/" target="_blank" rel="external">react-tutorial</a>ã§ã‚„ã‚Šã¾ã™ã€‚</p>
<p>ä½•ã¯ã¨ã‚‚ã‚ã‚ŒYarnæœ¬ä½“ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚<br>macOSã‚„unixã¯ä»¥ä¸‹ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã§ãã¾ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">curl -o- -L https://yarnpkg.com/install.sh | bash</div></pre></td></tr></table></figure>
<p>ã‚‚ã—ãã¯npmã‚’ç½®ãæ›ãˆã‚‹ã‚‚ã®ã‚’npmã§å…¥ã‚Œã‚‹ã®ã¯æ°—æŒã¡æ‚ªã„ã§ã™ãŒnpmã§ã‚‚ç°¡å˜ã«å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚<br><strong><code>yarn</code>ã¯ç¾åœ¨<a href="https://github.com/yarnpkg/yarn/issues/735" target="_blank" rel="external">ãƒã‚°ãŒã‚ã‚‹</a>ã®ã§ä»Šã®æ‰€ã¯<code>yarnpkg</code>ã®æ–¹ã‚’æ¨å¥¨ã—ã¾ã™</strong></p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">npm install --global yarnpkg</div><div class="line"># or</div><div class="line">npm install --global yarn</div></pre></td></tr></table></figure>
<p>react-tutorialã‚’cloneã—ã¦ãã¦dependenciesã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">git clone git@github.com:reactjs/react-tutorial.git</div><div class="line">cd react-tutorial</div><div class="line"></div><div class="line">yarn install</div><div class="line"># or just &quot;yarn&quot;</div></pre></td></tr></table></figure>
<p>ã“ã®æ™‚ç‚¹ã§æ„Ÿã˜ãŸã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ãŒã‚ã£ã¡ã‚ƒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ—©ã„ã§ã™ã€‚<br>è»½ãè¨ˆæ¸¬ã—ã¦ã¿ãŸã¨ã“ã‚npmã ã¨2.07sã€Yarnã ã¨0.66sã¨3å€ãã‚‰ã„Yarnã®æ–¹ãŒæ—©ã‹ã£ãŸã§ã™ã€‚</p>
<p>ã•ã‚‰ã«yarn.lockãŒç”Ÿæˆã•ã‚Œã¦ãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå›ºå®šã•ã‚Œã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã¾ã™ã€‚</p>
<p>npm-scriptsã¨åŒã˜æ©Ÿèƒ½ãŒYarnã«ã‚‚ã‚ã£ã¦<code>yarn run &lt;script&gt;</code>ã§å®Ÿè¡Œã§ãã¾ã™ã€‚<br>ã“ã‚Œã‚’ä½¿ã£ã¦react-tutorialã‚’èµ·å‹•ã—ã¦ã¿ã¾ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">yarn run start</div><div class="line"># or</div><div class="line">yarn start</div></pre></td></tr></table></figure>
<p>ãƒ–ãƒ©ã‚¦ã‚¶ã§<code>http://localhost:3000/</code>ã‚’é–‹ãã¨ãã¡ã‚“ã¨å‹•ã„ã¦ã„ã‚‹ã“ã¨ãŒç¢ºèªã§ãã‚‹ã¨æ€ã„ã¾ã™ã€‚</p>
<h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>npmã‚ˆã‚Šã‹ãªã‚Šé«˜é€ŸåŒ–ã—ã¦ã„ã‚‹ã“ã¨ãŒåˆ†ã‹ã‚Šã¾ã—ãŸã€CLIã®<a href="https://yarnpkg.com/en/docs/cli/" target="_blank" rel="external">ã‚³ãƒãƒ³ãƒ‰</a>ã‚‚npmã‚ˆã‚Šã‚·ãƒ³ãƒ—ãƒ«ã§å¥½ããªã®ã§ã“ã‚Œã‹ã‚‰ç©æ¥µçš„ã«ä½¿ã„ãŸã„ã§ã™ã€‚JavaScriptç•Œã®OSSé–‹ç™ºé€Ÿåº¦ã¯ã‚‚ã®ã™ã”ã„ã®ã§ã‚ªãƒ¼ãƒ—ãƒ³ã«ãªã£ãŸã“ã‚Œã‹ã‚‰åŠ é€Ÿåº¦çš„ã«è‰²ã€…æ”¹å–„ã•ã‚Œã¦ã„ãã¨æ€ã„ã¾ã™ã€‚<br>ç¾åœ¨npmä¸Šã®<code>yarn</code>ãŒç¾åœ¨ãƒã‚°ã£ã¦ã„ã‚‹ã“ã¨ãªã©ã‹ã‚‰ã¾ã è‹¥å¹²æ™‚æœŸå°šæ—©ã‹ãªã¨ã„ã†æ°—ãŒã—ã¾ã™ãŒã„ã–ã¨ã„ã†æ™‚ã¯npmä½¿ãˆã°è‰¯ã„ã®ã§ã‚ã‚Šã‹ãªã¨ã„ã†ã®ãŒå€‹äººçš„ãªæ„Ÿæƒ³ã§ã™ã€‚<br>Babel6ã®æ™‚ã¿ãŸã„ãªå¤§ããªå¤‰æ›´ãŒå…¥ã£ã¦è‹¦ã—ã‚€ã“ã¨ãŒèµ·ããªã„ã‚ˆã†ã«é¡˜ã„ã¾ã™ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Yarnã¨ã¯&quot;&gt;&lt;a href=&quot;#Yarnã¨ã¯&quot; class=&quot;headerlink&quot; title=&quot;Yarnã¨ã¯&quot;&gt;&lt;/a&gt;Yarnã¨ã¯&lt;/h1&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/yarnpkg/yarn&quot; target=&quot;_bla
    
    </summary>
    
    
      <category term="javascript" scheme="http://t-hiroyoshi.github.io/tags/javascript/"/>
    
      <category term="reactjs" scheme="http://t-hiroyoshi.github.io/tags/reactjs/"/>
    
  </entry>
  
  <entry>
    <title>Akka HTTP is faster than Spray now</title>
    <link href="http://t-hiroyoshi.github.io/akka-http-is-faster-than-spray/"/>
    <id>http://t-hiroyoshi.github.io/akka-http-is-faster-than-spray/</id>
    <published>2016-08-04T07:15:07.000Z</published>
    <updated>2016-08-04T10:12:41.000Z</updated>
    
    <content type="html"><![CDATA[<p>ã“ã‚“ã«ã¡ã¯ã€t-hiroyoshiã§ã™ã€‚</p>
<p>å…ˆæ—¥<a href="http://akka.io/news/2016/08/02/akka-2.4.9-RC1-released.html" target="_blank" rel="external">Akka 2.4.9-RC1</a>ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚<br>ä»Šå›ã®ãƒªãƒªãƒ¼ã‚¹ã¯Akka HTTPã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æ”¹å–„ã«ç„¦ç‚¹ã‚’çµã£ãŸã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã§Akka HTTPã®ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒSprayã¨åŒç­‰ã‹ãã‚Œä»¥ä¸Šã«ãªã£ãŸã¨æ›¸ã‹ã‚Œã¦ã„ã¾ã™ã€‚</p>
<h2 id="Akka-HTTP-revenge"><a href="#Akka-HTTP-revenge" class="headerlink" title="Akka HTTP revenge"></a>Akka HTTP revenge</h2><p><a href="/spray-akka-benchmark">ä»¥å‰</a>Akka HTTPã¨Spray-canã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã£ãŸæ™‚ã¯Sprayã«è»é…ãŒä¸ŠãŒã‚Šã¾ã—ãŸãŒã€ä»Šå›ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯ã©ã‚Œã»ã©ã®ã‚‚ã®ãªã®ã‹è»½ãèª¿ã¹ã‚‹ãŸã‚ã«å†åº¦Akka HTTPã®ã¿ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã‚Šã¾ã—ãŸ(Sprayã¯ã‚‚ã†æ›´æ–°ã•ã‚Œã¦ã„ã¾ã›ã‚“)ã€‚</p>
<p>ã‚³ãƒ¼ãƒ‰ã‚„ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ç’°å¢ƒã¯å‰å›ã¨åŒã˜çŠ¶æ…‹ã§Akkaã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®ã¿ä¸Šã’ã¦ã„ã¾ã™ã€‚</p>
<h3 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">This is ApacheBench, Version 2.3 &lt;$Revision: 1706008 $&gt;</div><div class="line"></div><div class="line">Server Software:        akka-http/2.4.9-RC1</div><div class="line">Server Hostname:        localhost</div><div class="line">Server Port:            8080</div><div class="line"></div><div class="line">Document Path:          /</div><div class="line">Document Length:        12 bytes</div><div class="line"></div><div class="line">Concurrency Level:      10</div><div class="line">Time taken for tests:   0.336 seconds</div><div class="line">Complete requests:      10000</div><div class="line">Failed requests:        0</div><div class="line">Keep-Alive requests:    10000</div><div class="line">Total transferred:      1820000 bytes</div><div class="line">HTML transferred:       120000 bytes</div><div class="line">Requests per second:    29805.82 [#/sec] (mean)</div><div class="line">Time per request:       0.336 [ms] (mean)</div><div class="line">Time per request:       0.034 [ms] (mean, across all concurrent requests)</div><div class="line">Transfer rate:          5297.52 [Kbytes/sec] received</div><div class="line"></div><div class="line">Connection Times (ms)</div><div class="line">              min  mean[+/-sd] median   max</div><div class="line">Connect:        0    0   0.0      0       0</div><div class="line">Processing:     0    0   0.4      0      17</div><div class="line">Waiting:        0    0   0.4      0      17</div><div class="line">Total:          0    0   0.4      0      17</div><div class="line"></div><div class="line">Percentage of the requests served within a certain time (ms)</div><div class="line">  50%      0</div><div class="line">  66%      0</div><div class="line">  75%      0</div><div class="line">  80%      0</div><div class="line">  90%      0</div><div class="line">  95%      1</div><div class="line">  98%      1</div><div class="line">  99%      2</div><div class="line"> 100%     17 (longest request)</div></pre></td></tr></table></figure>
<p>å‰å›ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã§ã¯Spray-canãŒ23230.85 req/secã§Spray-canã®æ–¹ãŒãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãŒè‰¯ã‹ã£ãŸã§ã™ãŒã€ä»Šå›Akka HTTPã¯29805.82 req/secã¨ã„ã†Spray-canã‚’è¶Šã™æ•°å€¤ã‚’å©ãå‡ºã—ã¾ã—ãŸã€‚<br>å‰å›ã®ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‹ã‚‰4ãƒ¶æœˆãã‚‰ã„ã—ã‹çµŒã£ã¦ã„ãªã„ã®ã«ã“ã‚“ãªã«é€Ÿããªã‚‹ã¨ã¯é©šãã§ã™ã€‚</p>
<h2 id="Next-steps-for-Akka-HTTP"><a href="#Next-steps-for-Akka-HTTP" class="headerlink" title="Next steps for Akka HTTP"></a>Next steps for Akka HTTP</h2><p>ä»Šå¾Œã®Akka HTTPã®ã“ã¨ã«ã¤ã„ã¦ã¯ã€Sprayã®çµ‚æœ«ã¨Akka HTTPã¸ã®ç½®ãæ›ãˆã‚’æ¨å¥¨ã—ã¦ã„ã¦è¿‘ã„ã†ã¡ã«experimentalãŒå¤–ã‚Œã‚‹ã‚ˆã†ã§ã™ã€‚<br>HTTP/2ã«ã¤ã„ã¦ã‚‚ä»Šå¾Œã‚„ã£ã¦ã„ãã‚ˆã†ã§<a href="https://github.com/akka/akka-meta" target="_blank" rel="external">ã“ã“</a>ã‹ã‚‰è¿½ãˆã¾ã™ã€‚<br>æœŸå¾…ã—ãªãŒã‚‰å¾…ã¡ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€t-hiroyoshiã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;å…ˆæ—¥&lt;a href=&quot;http://akka.io/news/2016/08/02/akka-2.4.9-RC1-released.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Akka 2
    
    </summary>
    
    
      <category term="akka" scheme="http://t-hiroyoshi.github.io/tags/akka/"/>
    
      <category term="scala" scheme="http://t-hiroyoshi.github.io/tags/scala/"/>
    
      <category term="server" scheme="http://t-hiroyoshi.github.io/tags/server/"/>
    
      <category term="spray" scheme="http://t-hiroyoshi.github.io/tags/spray/"/>
    
      <category term="benchmark" scheme="http://t-hiroyoshi.github.io/tags/benchmark/"/>
    
  </entry>
  
  <entry>
    <title>Scala Nativeã®ãƒ‡ãƒ¢ã‚’Dockerä¸Šã§å‹•ã‹ã™</title>
    <link href="http://t-hiroyoshi.github.io/scala-native-demo-docker/"/>
    <id>http://t-hiroyoshi.github.io/scala-native-demo-docker/</id>
    <published>2016-07-14T04:23:02.000Z</published>
    <updated>2016-07-26T06:17:05.000Z</updated>
    
    <content type="html"><![CDATA[<p>ã“ã‚“ã«ã¡ã¯ã€t-hiroyoshiã§ã™ã€‚<br>æœ€è¿‘ã¯<a href="http://event.scaladays.org/scaladays-nyc-2016" target="_blank" rel="external">Scala Days 2016 NYC</a>ã§ç™ºè¡¨ã•ã‚ŒãŸ<a href="https://github.com/scala-native/scala-native" target="_blank" rel="external">Scala Native</a>ã«ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚Scalaã®ã‚ˆã†ãªå¼·åŠ›ãªè¨€èªãŒbare metalã§å‹•ãã®ã¯ç´ æ™´ã‚‰ã—ã„äº‹ã ã¨æ€ã£ã¦ã„ã‚‹ã®ã§æ—©ãå®Ÿç”¨ãƒ¬ãƒ™ãƒ«ã§å‹•ãã‚ˆã†ã«ã“ã‚Œã‹ã‚‰ã‚‚ç©æ¥µçš„ã«è²¢çŒ®ã—ã¦ã„ããŸã„ã§ã™ã€‚</p>
<p>ãã‚“ãªè¨³ã§ä»Šå›ã¯å¸ƒæ•™ã‚’å…¼ã­ã¦Scala Nativeã®ãƒ‡ãƒ¢ã‚’Dockerä¸Šã§ç°¡å˜ã«å‹•ã‹ã™æ–¹æ³•ã‚’ç´¹ä»‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚</p>
<h1 id="Scala-Native"><a href="#Scala-Native" class="headerlink" title="Scala Native"></a>Scala Native</h1><p>Scala Nativeã¨ã¯ä½•ã‹ã¨è¨€ã†ã¨ã€Scalaã®ã‚³ãƒ¼ãƒ‰ã‚’LLVMã®IRçµŒç”±ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã—ã¦Nativeå®Ÿè¡Œå¯èƒ½ã«ã™ã‚‹AOTã‚³ãƒ³ãƒ‘ã‚¤ãƒ©(AheadOfTimeCompiler)å®Ÿè£…ã§ã™ã€‚<br>ä¸€éƒ¨ä½ç´šãªå‡¦ç†å‘ã‘ã«Scalaã‚’æ‹¡å¼µã—ã¦ã„ã‚‹ã®ã§ã‚ã‚‹æ„å‘³åˆ¥è¨€èªã¨è¨€ã£ã¦ã‚‚éè¨€ã§ã¯ãªã„ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ã€‚<br>ã“ã‚Œã‚‰ã®æ‹¡å¼µã«ã‚ˆã£ã¦Scalaã‚’System level languageã«è½ã¨ã—è¾¼ã‚ã‚‹ã®ã§ãã®æ°—ã«ãªã‚Œã°Scalaã§ä½•ã§ã‚‚ä½œã‚Œã‚‹ã‚ã‘ã§ã€ã¨ã¦ã‚‚æœªæ¥ãŒæ¥½ã—ã¿ã§ã™ã€‚</p>
<p>ãŸã READMEã«<code>pre-release stage</code>ã¨ã‚ã‚‹ã‚ˆã†ã«ã¾ã å®Œå…¨ã«Scala-likeã«ã¯å‹•ãã¾ã›ã‚“ã€ã§ã™ãŒæ´»ç™ºã«Issueã‚„Pull reqãŒé£›ã‚“ã§ã„ã‚‹ã®ã§è¿‘ã„ã†ã¡ã«ã¾ã¨ã‚‚ã«å‹•ãã‚ˆã†ã«ãªã‚‹ã¨æ€ã£ã¦ã„ã¾ã™ã€‚(ã¾ã å®Œæˆã—ã¦ã„ãªã„ä»Šãªã‚‰ã‚³ãƒ³ãƒˆãƒªãƒ“ãƒ¥ãƒ¼ãƒˆã®ãƒãƒ£ãƒ³ã‚¹?)</p>
<p>ç¾åœ¨ã¯LLVM(Clang)ã¨BOEHM GCã‚’ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã«ä¾å­˜ã—ã¦ã„ã‚‹ã®ã§ãƒ‡ãƒ¢ã‚’å‹•ã‹ã™ã¾ã§ã«ãã‚Œã‚‰ã®ãƒ‘ã‚¹ãŒé€šã‚‰ãªã‹ã£ãŸã‚Šã€ä¾å­˜è§£æ±ºã§çµæ§‹èº“ãäººãŒå¤šã„ã¿ãŸã„ã§ã™ã€‚<br>ãã“ã§Scala Nativeã®ãƒ¬ãƒã‚¸ãƒˆãƒªå†…ã«ã‚ã‚‹Dockerfileã‚’ä½¿ã£ã¦ä½œã£ãŸã‚³ãƒ³ãƒ†ãƒŠå†…ã§ãƒ‡ãƒ¢ã‚’å‹•ã‹ã—ã¦ã¿ãŸã„ã¨æ€ã„ã¾ã™ã€‚ç®¡ç†ç”¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚‚ãã¡ã‚“ã¨ã‚ã‚‹ã®ã§æ¯”è¼ƒçš„ç°¡å˜ã«å‹•ã‹ã™äº‹ãŒå¯èƒ½ã§ã™ã€‚</p>
<h1 id="æ‰‹é †"><a href="#æ‰‹é †" class="headerlink" title="æ‰‹é †"></a>æ‰‹é †</h1><h2 id="docker-machineã‚’ç«‹ã¦ã‚‹-Option"><a href="#docker-machineã‚’ç«‹ã¦ã‚‹-Option" class="headerlink" title="docker-machineã‚’ç«‹ã¦ã‚‹(Option)"></a>docker-machineã‚’ç«‹ã¦ã‚‹(Option)</h2><p>ãªã‚‹ã¹ããƒ­ãƒ¼ã‚«ãƒ«ã®ç’°å¢ƒã‚’æ±šæŸ“ã—ãŸããªã„ã®ã§docker-machineã§Dockerãƒ›ã‚¹ãƒˆã‚’ç«‹ã¦ã¾ã™ã€‚<br>driverã¯<code>virtualbox</code>ã‚’ä½¿ã£ã¦ã„ã¾ã™ãŒ<code>vmwarefusion</code>ã§ç«‹ã¦ãŸæ–¹ãŒã‚‚ã—ã‹ã—ãŸã‚‰<a href="http://qiita.com/suin/items/c4ba1cfd354586bbed59" target="_blank" rel="external">é€Ÿã„</a>ã‹ã‚‚ã§ã™(Scalaã¯compileæ™‚é–“ãŒé•·ã„ã¨è¨€ã‚ã‚Œã¦ã„ã‚‹)ã€‚<br>ãƒ¡ãƒ¢ãƒªã‚’æŒ‡å®šã—ãªã„ã¨1Gã—ã‹å‰²ã‚Šå½“ã¦ã‚‰ã‚Œãªã„ã®ã§å¢—ã‚„ã—ã¦ãŠãã¾ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ docker-machine create -d virtualbox --virtualbox-memory 2048 scalanative</div></pre></td></tr></table></figure>
<p>docker-machineãŒç«‹ã¡ä¸ŠãŒã£ãŸã‚‰sshã§ç¹‹ãã¾ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ docker-machine ssh scala-native</div></pre></td></tr></table></figure>
<p>ç®¡ç†ç”¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã¯bashã§å‹•ãã®ã§ã™ãŒã€Boot2Dockerã¯æ¨™æº–ã§bashãŒå…¥ã£ã¦ã„ãªã„ã®ã§æ¬¡ã«é€²ã‚€å‰ã«<a href="https://t-hiroyoshi.github.io/docker-machine-bash/">ã“ã“</a>ã‚’å‚è€ƒã«bashã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¦ãã ã•ã„ã€‚</p>
<h2 id="Scala-Nativeã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹"><a href="#Scala-Nativeã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹" class="headerlink" title="Scala Nativeã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹"></a>Scala Nativeã®ã‚³ãƒ³ãƒ†ãƒŠã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ãƒ“ãƒ«ãƒ‰ã™ã‚‹</h2><p>ã¾ãšã¯ã¨ã‚‚ã‹ãScala Nativeã®ã‚½ãƒ¼ã‚¹ã‚’cloneã—ã¦ãã¾ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ git clone https://github.com/scala-native/scala-native.git</div></pre></td></tr></table></figure>
<p><code>scala-native/docker</code>ã®ä¸­ã«DockerfileãŒã‚ã‚‹ã®ã§ç§»å‹•ã—ã¦ç®¡ç†ç”¨ã®ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å©ãã¾ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ cd scala-native/docker</div><div class="line">$ ./manage.sh build</div></pre></td></tr></table></figure>
<p>è‰²ã€…ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ãŸã‚Šã™ã‚‹ã®ã§çµæ§‹æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ã€‚</p>
<p>æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™è¾›æŠ±å¼·ãå¾…ã£ã¦ä¸‹ã•ã„ã€ã‚³ãƒ¼ãƒ’ãƒ¼ã§ã‚‚é£²ã‚“ã§ã„ã‚Œã°è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚<br>ãƒ“ãƒ«ãƒ‰ãŒçµ‚ã‚ã£ãŸã‚‰ã„ã‚ˆã„ã‚ˆãƒ‡ãƒ¢ã‚’å‹•ã‹ã—ã¾ã™ã€‚</p>
<h2 id="Scala-Nativeã®ãƒ‡ãƒ¢ã‚’å®Ÿè¡Œã™ã‚‹"><a href="#Scala-Nativeã®ãƒ‡ãƒ¢ã‚’å®Ÿè¡Œã™ã‚‹" class="headerlink" title="Scala Nativeã®ãƒ‡ãƒ¢ã‚’å®Ÿè¡Œã™ã‚‹"></a>Scala Nativeã®ãƒ‡ãƒ¢ã‚’å®Ÿè¡Œã™ã‚‹</h2><p>ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å©ã„ã¦ãƒ“ãƒ«ãƒ‰ã—ãŸã‚³ãƒ³ãƒ†ãƒŠã®ä¸­ã«å…¥ã‚Šã¾ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ ./manage.sh run</div></pre></td></tr></table></figure>
<p>ã“ã“ã§ã‚¨ãƒ©ãƒ¼ãŒå‡ºã¦sbtãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãŒèª­ã¿è¾¼ã¾ã‚Œãªã„æ–¹ã¯<code>scala-native/</code>é…ä¸‹ã®targetãƒ•ã‚©ãƒ«ãƒ€ã‚’å…¨ã¦å‰Šé™¤ã—ã¦ã¿ã¦ãã ã•ã„ã€‚<br>ã‚³ãƒ³ãƒ†ãƒŠã«å…¥ã‚ŒãŸã‚‰sbtã‚’èµ·å‹•ã—ã¦ãƒ‡ãƒ¢ãŒã‚ã‚‹demoNativeãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æŒ‡å®šã—ã¾ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">$ sbt</div><div class="line">&gt; project demoNative</div><div class="line">&gt; run</div></pre></td></tr></table></figure>
<p>å¾Œã¯<code>run</code>ã™ã‚Œã°ãƒ‡ãƒ¢ãŒå‹•ãå‡ºã—ã¦ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã•ã‚ŒãŸãƒã‚¤ãƒŠãƒªãŒ<code>scala-native/demo/native/target/scala-2.11/demonative-out</code>ã«åãå‡ºã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™ã€‚</p>
<p>ã“ã‚Œã¯ãã®ã¾ã¾å®Ÿè¡Œã§ãã‚‹ã®ã§ã„ã‚ã„ã‚è©¦ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€t-hiroyoshiã§ã™ã€‚&lt;br&gt;æœ€è¿‘ã¯&lt;a href=&quot;http://event.scaladays.org/scaladays-nyc-2016&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Scala Days 2016 NYC&lt;/a&gt;
    
    </summary>
    
    
      <category term="scala" scheme="http://t-hiroyoshi.github.io/tags/scala/"/>
    
      <category term="docker" scheme="http://t-hiroyoshi.github.io/tags/docker/"/>
    
      <category term="scala-native" scheme="http://t-hiroyoshi.github.io/tags/scala-native/"/>
    
  </entry>
  
  <entry>
    <title>Docker Machineã§bashã‚’ä½¿ãˆã‚‹ã‚ˆã†ã«ã™ã‚‹</title>
    <link href="http://t-hiroyoshi.github.io/docker-machine-bash/"/>
    <id>http://t-hiroyoshi.github.io/docker-machine-bash/</id>
    <published>2016-06-19T14:22:43.000Z</published>
    <updated>2016-06-20T09:07:39.000Z</updated>
    
    <content type="html"><![CDATA[<p>Docker Machineã‚ã£ã¡ã‚ƒä¾¿åˆ©ã§ã™ãŒBoot2Dockerä¸Šã§ä½œæ¥­ã‚’ã—ã¦ã„ã‚‹æ™‚ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’Shell Scriptã§ç®¡ç†ã—ã¦ã„ã¦å›°ã£ãŸã“ã¨ã‚ã‚Šã¾ã›ã‚“ã‹?</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">docker@dev:/Users/t-hiroyoshi/git/some-project/docker$ ./manage.sh build</div><div class="line">env: can&apos;t execute &apos;bash&apos;: No such file or directory</div></pre></td></tr></table></figure>
<p>bashãŒBoot2Dockerã«å…¥ã£ã¦ãªã„!ã“ã‚Œã¯å›°ã‚‹!ã¨ã„ã†ã“ã¨ã§Boot2Dockerã«bashã‚’å…¥ã‚Œã‚‹æ–¹æ³•ã§ã™ã€‚<br>Boot2Dockerã¯<a href="http://tinycorelinux.net" target="_blank" rel="external">Tiny Core Linux</a>ãƒ™ãƒ¼ã‚¹ã§å‹•ã„ã¦ã„ã‚‹ã®ã§ãã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ (<a href="http://wiki.tinycorelinux.net/wiki:tce-load" target="_blank" rel="external">tce-load</a>)ã‚’åˆ©ç”¨ã—ã¦ã‚ã’ã‚Œã°ä¸‡äº‹è§£æ±ºã§ã™ã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">docker@dev:/Users/t-hiroyoshi/git/some-project/docker$ tce-load -wi bash</div></pre></td></tr></table></figure>
<p>ã“ã‚Œã§bashãŒä½¿ãˆã‚‹ã‚ˆã†ã«ãªã£ãŸã®ã§bash Shell ScriptãŒä½¿ãˆã¾ã™ã€‚<br>Docker Machine(Boot2Docker)ä¸Šã«çŠ¶æ…‹ã‚’æŒã¤ã®ã¯ã‚ã¾ã‚Šè‰¯ããªã„æ°—ãŒã—ã¾ã™ãŒã¾ã‚bashãã‚‰ã„ã¯ã‚ã£ã¦ã‚‚ã„ã„ã®ã§ã¯ã¨æ€ã„ã¾ã—ãŸã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;Docker Machineã‚ã£ã¡ã‚ƒä¾¿åˆ©ã§ã™ãŒBoot2Dockerä¸Šã§ä½œæ¥­ã‚’ã—ã¦ã„ã‚‹æ™‚ã€ã‚³ãƒ³ãƒ†ãƒŠã‚’Shell Scriptã§ç®¡ç†ã—ã¦ã„ã¦å›°ã£ãŸã“ã¨ã‚ã‚Šã¾ã›ã‚“ã‹?&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td clas
    
    </summary>
    
    
      <category term="docker" scheme="http://t-hiroyoshi.github.io/tags/docker/"/>
    
      <category term="shell" scheme="http://t-hiroyoshi.github.io/tags/shell/"/>
    
  </entry>
  
  <entry>
    <title>Akka HTTP vs Spray</title>
    <link href="http://t-hiroyoshi.github.io/spray-akka-benchmark/"/>
    <id>http://t-hiroyoshi.github.io/spray-akka-benchmark/</id>
    <published>2016-04-15T13:01:19.000Z</published>
    <updated>2016-08-04T07:25:56.000Z</updated>
    
    <content type="html"><![CDATA[<p>ã“ã‚“ã«ã¡ã¯ã€t-hiroyoshiã§ã™ã€‚<br>ä»Šå›ã¯<a href="http://t-hiroyoshi.github.io/akka-http-api/">å‰å›ç´¹ä»‹</a>ã—ãŸ<a href="http://doc.akka.io/docs/akka/2.4.4/scala/http/introduction.html" target="_blank" rel="external">Akka HTTP</a>ã®æ€§èƒ½ãŒæ°—ã«ãªã£ãŸã®ã§ã–ã£ãã‚Šãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’å–ã£ã¦ã¿ã¾ã—ãŸã€‚<br>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯<a href="https://github.com/t-hiroyoshi/akka-http-vs-spray" target="_blank" rel="external">Github</a>ã«ã‚ã’ã¾ã—ãŸã€‚</p>
<p>ãã‚Œãã‚Œã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç­‰ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã™ã€‚</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><div class="line"><span class="comment">// sbt.version = 0.13.11</span></div><div class="line"><span class="comment">// addSbtPlugin("io.spray" % "sbt-revolver" % "0.8.0")</span></div><div class="line"><span class="comment">// addSbtPlugin("com.eed3si9n" % "sbt-assembly" % "0.14.2")</span></div><div class="line"></div><div class="line"><span class="keyword">lazy</span> <span class="keyword">val</span> commonSettings = <span class="type">Seq</span>(</div><div class="line">  name := <span class="string">"akka-http-vs-spray"</span>,</div><div class="line">  version := <span class="string">"1.0.0"</span>,</div><div class="line">  scalaVersion := <span class="string">"2.11.8"</span>,</div><div class="line">  scalacOptions := <span class="type">Seq</span>(<span class="string">"-unchecked"</span>, <span class="string">"-deprecation"</span>, <span class="string">"-encoding"</span>, <span class="string">"utf8"</span>, <span class="string">"-Xlint"</span>)</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">val</span> akkaV = <span class="string">"2.4.4"</span></div><div class="line"><span class="keyword">val</span> sprayV = <span class="string">"1.3.3"</span></div><div class="line"></div><div class="line"><span class="keyword">lazy</span> <span class="keyword">val</span> spraySettings = <span class="type">Seq</span>(</div><div class="line">  libraryDependencies ++= &#123;</div><div class="line">    <span class="type">Seq</span>(</div><div class="line">      <span class="string">"com.typesafe.akka"</span>   %%  <span class="string">"akka-actor"</span>    % akkaV,</div><div class="line">      <span class="string">"io.spray"</span>            %%  <span class="string">"spray-can"</span>     % sprayV,</div><div class="line">      <span class="string">"io.spray"</span>            %%  <span class="string">"spray-routing"</span> % sprayV</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">lazy</span> <span class="keyword">val</span> akkaSettings = <span class="type">Seq</span>(</div><div class="line">  libraryDependencies ++= &#123;</div><div class="line">    <span class="type">Seq</span>(</div><div class="line">      <span class="string">"com.typesafe.akka"</span> %% <span class="string">"akka-actor"</span> % akkaV,</div><div class="line">      <span class="string">"com.typesafe.akka"</span> %% <span class="string">"akka-stream"</span> % akkaV,</div><div class="line">      <span class="string">"com.typesafe.akka"</span> %% <span class="string">"akka-http-experimental"</span> % akkaV</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">)</div><div class="line"></div><div class="line"><span class="keyword">lazy</span> <span class="keyword">val</span> sprayServer = (project in file(<span class="string">"spray-server"</span>))</div><div class="line">.settings(commonSettings: _*)</div><div class="line">.settings(spraySettings: _*)</div><div class="line">.settings(assemblyOutputPath in assembly := file(<span class="string">"./spray-server.jar"</span>))</div><div class="line"></div><div class="line"><span class="keyword">lazy</span> <span class="keyword">val</span> akkaServer = (project in file(<span class="string">"akka-server"</span>))</div><div class="line">.settings(commonSettings: _*)</div><div class="line">.settings(akkaSettings: _*)</div><div class="line">.settings(assemblyOutputPath in assembly := file(<span class="string">"./akka-server.jar"</span>))</div><div class="line"></div><div class="line"><span class="type">Revolver</span>.settings</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">java version &quot;1.8.0_71&quot;</div><div class="line">Java(TM) SE Runtime Environment (build 1.8.0_71-b15)</div><div class="line">Java HotSpot(TM) 64-Bit Server VM (build 25.71-b15, mixed mode)</div></pre></td></tr></table></figure>
<p><code>sbt assembly</code>ã—ãŸjarã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§<code>java -jar</code>ã—ã¦ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã‚’ã¨ã‚Šã¾ã—ãŸã€‚</p>
<p>ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒ</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">MacBook Pro (Retina, 13-inch, Early 2015)</div><div class="line">OS: OSX 10.11.4</div><div class="line">Processor: 3.1 GHz Intel Core i7</div><div class="line">Memory: 16 GB 1867 MHz DDR3</div></pre></td></tr></table></figure>
<p>ãƒ™ãƒ³ãƒãƒãƒ¼ã‚¯ã«ã¯ApacheBenchã‚’ç”¨ã„ã¾ã—ãŸã€‚</p>
<figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">ab -k -c 10 -n 10000 http://localhost:8080/</div></pre></td></tr></table></figure>
<p>ä»¥ä¸‹ãã‚Œãã‚Œã®çµæœã§ã™ã€‚</p>
<h2 id="Akka-HTTP"><a href="#Akka-HTTP" class="headerlink" title="Akka HTTP"></a>Akka HTTP</h2><h3 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h3><figure class="highlight scala"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> akka.server</div><div class="line"></div><div class="line"><span class="keyword">import</span> akka.actor.<span class="type">ActorSystem</span></div><div class="line"><span class="keyword">import</span> akka.http.scaladsl.<span class="type">Http</span></div><div class="line"><span class="keyword">import</span> akka.http.scaladsl.server.<span class="type">Directives</span>._</div><div class="line"><span class="keyword">import</span> akka.stream.<span class="type">ActorMaterializer</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">object</span> <span class="title">Boot</span> <span class="keyword">extends</span> <span class="title">App</span> </span>&#123;</div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">lazy</span> <span class="keyword">val</span> system = <span class="type">ActorSystem</span>(<span class="string">"akka-server"</span>)</div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">lazy</span> <span class="keyword">val</span> materializer = <span class="type">ActorMaterializer</span>()</div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> ec = system.dispatcher</div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="keyword">val</span> route =</div><div class="line">    pathSingleSlash &#123;</div><div class="line">      get &#123;</div><div class="line">        complete(<span class="string">"Hello world!"</span>)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  <span class="type">Http</span>().bindAndHandle(route, <span class="string">"localhost"</span>, <span class="number">8080</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Result"><a href="#Result" class="headerlink" title="Result"></a>Result</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">This is ApacheBench, Version 2.3 &lt;$Revision: 1706008 $&gt;</div><div class="line"></div><div class="line">Server Software:        akka-http/2.4.4</div><div class="line">Server Hostname:        localhost</div><div class="line">Server Port:            8080</div><div class="line"></div><div class="line">Document Path:          /</div><div class="line">Document Length:        12 bytes</div><div class="line"></div><div class="line">Concurrency Level:      10</div><div class="line">Time taken for tests:   0.465 seconds</div><div class="line">Complete requests:      10000</div><div class="line">Failed requests:        0</div><div class="line">Keep-Alive requests:    10000</div><div class="line">Total transferred:      1780000 bytes</div><div class="line">HTML transferred:       120000 bytes</div><div class="line">Requests per second:    21490.49 [#/sec] (mean)</div><div class="line">Time per request:       0.465 [ms] (mean)</div><div class="line">Time per request:       0.047 [ms] (mean, across all concurrent requests)</div><div class="line">Transfer rate:          3735.65 [Kbytes/sec] received</div><div class="line"></div><div class="line">Connection Times (ms)</div><div class="line">              min  mean[+/-sd] median   max</div><div class="line">Connect:        0    0   0.0      0       0</div><div class="line">Processing:     0    0   1.0      0      42</div><div class="line">Waiting:        0    0   1.0      0      42</div><div class="line">Total:          0    0   1.0      0      42</div><div class="line"></div><div class="line">Percentage of the requests served within a certain time (ms)</div><div class="line">  50%      0</div><div class="line">  66%      0</div><div class="line">  75%      0</div><div class="line">  80%      0</div><div class="line">  90%      1</div><div class="line">  95%      1</div><div class="line">  98%      2</div><div class="line">  99%      3</div><div class="line"> 100%     42 (longest request)</div></pre></td></tr></table></figure>
<h2 id="Spray-can"><a href="#Spray-can" class="headerlink" title="Spray-can"></a>Spray-can</h2><h3 id="Code-1"><a href="#Code-1" class="headerlink" title="Code"></a>Code</h3><figure class="highlight scala"><table><tr><td class="code"><pre><div class="line"><span class="keyword">package</span> spray.server</div><div class="line"></div><div class="line"><span class="keyword">import</span> akka.actor._</div><div class="line"><span class="keyword">import</span> akka.io.<span class="type">IO</span></div><div class="line"><span class="keyword">import</span> spray.can.<span class="type">Http</span></div><div class="line"><span class="keyword">import</span> spray.routing._</div><div class="line"><span class="keyword">import</span> spray.http._</div><div class="line"><span class="keyword">import</span> akka.pattern.ask</div><div class="line"><span class="keyword">import</span> akka.util.<span class="type">Timeout</span></div><div class="line"><span class="keyword">import</span> scala.concurrent.duration._</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">object</span> <span class="title">Boot</span> <span class="keyword">extends</span> <span class="title">App</span> </span>&#123;</div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> system = <span class="type">ActorSystem</span>(<span class="string">"spray-server"</span>)</div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> timeout = <span class="type">Timeout</span>(<span class="number">5.</span>seconds)</div><div class="line">  <span class="keyword">val</span> service = system.actorOf(<span class="type">Props</span>[<span class="type">ServiceActor</span>], <span class="string">"spray-service"</span>)</div><div class="line"></div><div class="line">  <span class="type">IO</span>(<span class="type">Http</span>) ? <span class="type">Http</span>.<span class="type">Bind</span>(service, <span class="string">"localhost"</span>, <span class="number">8080</span>)</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ServiceActor</span> <span class="keyword">extends</span> <span class="title">Actor</span> <span class="keyword">with</span> <span class="title">HttpService</span> </span>&#123;</div><div class="line">  <span class="keyword">private</span> <span class="keyword">val</span> route =</div><div class="line">    pathSingleSlash &#123;</div><div class="line">      get &#123;</div><div class="line">        complete(<span class="string">"Hello world!"</span>)</div><div class="line">      &#125;</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">actorRefFactory</span> </span>= context</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">receive</span> </span>= runRoute(route)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h3 id="Result-1"><a href="#Result-1" class="headerlink" title="Result"></a>Result</h3><figure class="highlight plain"><table><tr><td class="code"><pre><div class="line">This is ApacheBench, Version 2.3 &lt;$Revision: 1706008 $&gt;</div><div class="line"></div><div class="line">Server Software:        spray-can/1.3.3</div><div class="line">Server Hostname:        localhost</div><div class="line">Server Port:            8080</div><div class="line"></div><div class="line">Document Path:          /</div><div class="line">Document Length:        12 bytes</div><div class="line"></div><div class="line">Concurrency Level:      10</div><div class="line">Time taken for tests:   0.430 seconds</div><div class="line">Complete requests:      10000</div><div class="line">Failed requests:        0</div><div class="line">Keep-Alive requests:    10000</div><div class="line">Total transferred:      1780000 bytes</div><div class="line">HTML transferred:       120000 bytes</div><div class="line">Requests per second:    23230.85 [#/sec] (mean)</div><div class="line">Time per request:       0.430 [ms] (mean)</div><div class="line">Time per request:       0.043 [ms] (mean, across all concurrent requests)</div><div class="line">Transfer rate:          4038.18 [Kbytes/sec] received</div><div class="line"></div><div class="line">Connection Times (ms)</div><div class="line">              min  mean[+/-sd] median   max</div><div class="line">Connect:        0    0   0.0      0       0</div><div class="line">Processing:     0    0   0.9      0      20</div><div class="line">Waiting:        0    0   0.9      0      20</div><div class="line">Total:          0    0   0.9      0      20</div><div class="line"></div><div class="line">Percentage of the requests served within a certain time (ms)</div><div class="line">  50%      0</div><div class="line">  66%      0</div><div class="line">  75%      0</div><div class="line">  80%      0</div><div class="line">  90%      1</div><div class="line">  95%      1</div><div class="line">  98%      2</div><div class="line">  99%      3</div><div class="line"> 100%     20 (longest request)</div></pre></td></tr></table></figure>
<h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p> Akka HTTPãŒ21490.49 req/secã€Spray-canãŒ23230.85 req/secã¨å‰²ã¨è¿‘ã„æ•°å€¤ãŒå‡ºãŸæ°—ãŒã—ã¾ã™ã€‚<br> Akka HTTPã¯å‰ã‚‚ã£ã¨ä½¿ã„ç‰©ã«ãªã‚‰ãªã„ãã‚‰ã„é…ã‹ã£ãŸã‚¤ãƒ¡ãƒ¼ã‚¸ã ã£ãŸã‚“ã§ã™ãŒã“ã‚Œãªã‚‰ååˆ†ãªãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒã•ã°ã‘ãã†ã§ã™ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€t-hiroyoshiã§ã™ã€‚&lt;br&gt;ä»Šå›ã¯&lt;a href=&quot;http://t-hiroyoshi.github.io/akka-http-api/&quot;&gt;å‰å›ç´¹ä»‹&lt;/a&gt;ã—ãŸ&lt;a href=&quot;http://doc.akka.io/docs/akka/2.4.4/sc
    
    </summary>
    
    
      <category term="akka" scheme="http://t-hiroyoshi.github.io/tags/akka/"/>
    
      <category term="scala" scheme="http://t-hiroyoshi.github.io/tags/scala/"/>
    
      <category term="server" scheme="http://t-hiroyoshi.github.io/tags/server/"/>
    
      <category term="spray" scheme="http://t-hiroyoshi.github.io/tags/spray/"/>
    
      <category term="benchmark" scheme="http://t-hiroyoshi.github.io/tags/benchmark/"/>
    
  </entry>
  
  <entry>
    <title>Akka-HTTPã§REST APIã‚’ä½œã‚‹</title>
    <link href="http://t-hiroyoshi.github.io/akka-http-api/"/>
    <id>http://t-hiroyoshi.github.io/akka-http-api/</id>
    <published>2016-04-12T08:21:04.000Z</published>
    <updated>2016-04-18T06:09:02.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="Akka-HTTP"><a href="#Akka-HTTP" class="headerlink" title="Akka-HTTP"></a>Akka-HTTP</h1><p>Akka-HTTPã¯Akka-Actorã¨Akka-Streamsã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸAkkaã®HTTP moduleã§ã™ã€‚<br>ç•°ãªã‚‹ãƒ¬ãƒ™ãƒ«ã§ã®APIã‚’æä¾›ã—ã¦ãã‚Œã¦ã„ã‚‹ã®ã§é«˜ãƒ¬ãƒ™ãƒ«ã‹ã‚‰ä½ãƒ¬ãƒ™ãƒ«ãªã¨ã“ã‚ã¾ã§ã‚«ã‚¹ã‚¿ãƒ ã™ã‚‹ã“ã¨ãŒã§ãã¦è‰¯ã„ã§ã™ã€‚<br>ã‚ã¨ã¯<a href="http://spray.io" target="_blank" rel="external">Spray</a>ã®é–‹ç™ºãƒãƒ¼ãƒ ãŒLightbend(æ—§Typesafe)ã«ãã®ã¾ã¾ç§»è¡Œã—ã¦é–‹ç™ºã—ã¦ã„ã‚‹(?)ã®ã§å‰²ã¨Sprayã®APIã€DSLã«ä¼¼ã¦ã„ã‚‹éƒ¨åˆ†ãŒå¤šã‹ã£ãŸã‚Šã—ã¦Sprayä½¿ã£ãŸã“ã¨ãŒã‚ã‚‹äººã¯ç§»è¡Œã—ã‚„ã™ã„ã¨æ€ã„ã¾ã™ã€‚ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã¯æœ€è¿‘ã¯Sprayã«è¿«ã‚‹ã¨ã“ã‚ã¾ã§æ¥ã¦ã„ã¦å®Ÿç”¨ã«è¶³ã‚‹ã¨ã“ã‚ã¾ã§æ¥ã¦ã„ã‚‹ã®ã§ã¯ç„¡ã„ã§ã—ã‚‡ã†ã‹ã€‚<br>Akka-HTPPã¯å¹¾ã¤ã‹ã®moduleã‹ã‚‰æˆã‚Šç«‹ã£ã¦ã„ã¦ãã‚Œãã‚Œã‚’è»½ãèª¬æ˜ã™ã‚‹ã¨ä»¥ä¸‹ã®æ„Ÿã˜ã«ãªã‚Šã¾ã™ã€‚</p>
<ul>
<li>akka-http-core: ã»ã¨ã‚“ã©ãŒä½ãƒ¬ãƒ™ãƒ«ã§æ§‹æˆã•ã‚Œã¦ã„ã¦http server, clientã®ãŸã‚ã®module(WebSocketsã‚‚å«ã‚€)</li>
<li>akka-http: é«˜ãƒ¬ãƒ™ãƒ«ãªé–¢æ•°ã‚„http serverã®APIå®šç¾©ãªã©ã«ä½¿ç”¨å‡ºæ¥ã‚‹DSLã‚’å«ã‚“ã§ã„ã‚‹module</li>
<li>akka-http-testkit: http serverã®ãŸã‚ã®ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«module</li>
<li>akka-http-spray-json: JSONã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã€ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã®ãŸã‚ã®module</li>
<li>akka-http-xml: XMLã®ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã€ãƒ‡ã‚·ãƒªã‚¢ãƒ©ã‚¤ã‚ºã®ãŸã‚ã®module</li>
</ul>
<h1 id="å®Ÿè£…"><a href="#å®Ÿè£…" class="headerlink" title="å®Ÿè£…"></a>å®Ÿè£…</h1><p>Userã®CRUDãŒã§ãã‚‹REST APIã‚’ä½œã£ã¦ã¿ã¾ã™ã€‚<br>ã‚½ãƒ¼ã‚¹ã‚³ãƒ¼ãƒ‰ã¯<a href="https://github.com/t-hiroyoshi/akka-http-standalone" target="_blank" rel="external">Github</a>ã«ã‚ã’ã¦ãŠãã¾ã—ãŸã€‚</p>
<h2 id="sbt"><a href="#sbt" class="headerlink" title="sbt"></a>sbt</h2><p>ã¾ãšã¯plugin.sbtã‚’æ›¸ãã¾ã™ã€‚<br>sbt-assemblyã¯Stand-aloneãªjarã‚’ä½œã‚‹ã®ã«ä½¿ç”¨ã—ã¾ã™ã€‚</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><div class="line">logLevel := <span class="type">Level</span>.<span class="type">Warn</span></div><div class="line"></div><div class="line">addSbtPlugin(<span class="string">"io.spray"</span> % <span class="string">"sbt-revolver"</span> % <span class="string">"0.8.0"</span>)</div><div class="line"></div><div class="line">addSbtPlugin(<span class="string">"com.eed3si9n"</span> % <span class="string">"sbt-assembly"</span> % <span class="string">"0.14.2"</span>)</div></pre></td></tr></table></figure>
<p>æ¬¡ã«build.sbtã«å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã‚’è¿½è¨˜ã—ã¦ãŠãã¾ã™ã€‚</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><div class="line">name := <span class="string">"akka-http-standalone"</span></div><div class="line"></div><div class="line">version := <span class="string">"1.0"</span></div><div class="line"></div><div class="line">scalaVersion := <span class="string">"2.11.8"</span></div><div class="line"></div><div class="line">scalacOptions := <span class="type">Seq</span>(<span class="string">"-unchecked"</span>, <span class="string">"-deprecation"</span>, <span class="string">"-encoding"</span>, <span class="string">"utf8"</span>, <span class="string">"-Xlint"</span>)</div><div class="line"></div><div class="line">assemblyOutputPath in assembly := file(<span class="string">"./akka-http-standalone.jar"</span>)</div><div class="line"></div><div class="line">libraryDependencies ++= &#123;</div><div class="line">  <span class="keyword">val</span> akkaV = <span class="string">"2.4.2"</span></div><div class="line"></div><div class="line">  <span class="type">Seq</span>(</div><div class="line">    <span class="string">"com.typesafe.akka"</span> %% <span class="string">"akka-actor"</span> % akkaV,</div><div class="line">    <span class="string">"com.typesafe.akka"</span> %% <span class="string">"akka-stream"</span> % akkaV,</div><div class="line">    <span class="string">"com.typesafe.akka"</span> %% <span class="string">"akka-http-experimental"</span> % akkaV,</div><div class="line">    <span class="string">"com.typesafe.akka"</span> %% <span class="string">"akka-http-spray-json-experimental"</span> % akkaV,</div><div class="line">    <span class="string">"com.typesafe.akka"</span> %% <span class="string">"akka-http-xml-experimental"</span> % akkaV,</div><div class="line">    <span class="string">"com.typesafe.akka"</span> %% <span class="string">"akka-http-testkit"</span> % akkaV</div><div class="line">  )</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="type">Revolver</span>.settings</div></pre></td></tr></table></figure>
<h2 id="Scala"><a href="#Scala" class="headerlink" title="Scala"></a>Scala</h2><p>Routeã‚’æ›¸ãå‰ã«ãƒ‡ãƒ¼ã‚¿ã‚„ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å®šç¾©ã—ã¾ã™ã€JSONã‚’ä½¿ã„ãŸã„ã®ã§ã•ã‚‰ã«JsonProtocolã‚‚å®šç¾©ã—ã¾ã™ã€‚<br>jsonFormatã®å¾Œã‚ã«ã¤ã„ã¦ã„ã‚‹1ã‚„2ã¯Classã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æ•°ã‚’è¡¨ã—ã¦ã„ã¾ã™ã€‚</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> spray.json.<span class="type">DefaultJsonProtocol</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">object</span> <span class="title">MyData</span> </span>&#123;</div><div class="line">  <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span>(<span class="params">id: <span class="type">Int</span>, name: <span class="type">String</span></span>)</span></div><div class="line">  <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">ErrorResponse</span>(<span class="params">message: <span class="type">String</span></span>)</span></div><div class="line">  <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">CreateUserRequest</span>(<span class="params">name: <span class="type">String</span></span>)</span></div><div class="line">  <span class="keyword">case</span> <span class="class"><span class="keyword">class</span> <span class="title">UpdateUserRequest</span>(<span class="params">name: <span class="type">String</span></span>)</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">object</span> <span class="title">JsonProtocol</span> <span class="keyword">extends</span> <span class="title">DefaultJsonProtocol</span> </span>&#123;</div><div class="line">  <span class="keyword">import</span> <span class="type">MyData</span>._</div><div class="line"></div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">lazy</span> <span class="keyword">val</span> userFormat = jsonFormat2(<span class="type">User</span>)</div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">lazy</span> <span class="keyword">val</span> errorResponse = jsonFormat1(<span class="type">ErrorResponse</span>)</div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">lazy</span> <span class="keyword">val</span> createUserRequestFormat = jsonFormat1(<span class="type">CreateUserRequest</span>)</div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">lazy</span> <span class="keyword">val</span> updateUserRequest = jsonFormat1(<span class="type">UpdateUserRequest</span>)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ãƒ‡ãƒ¼ã‚¿ã®å®šç¾©ãŒå®Œäº†ã—ãŸã®ã§å®Ÿéš›ã«Routeã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€ã»ã¼Sprayã®æ›¸ãæ–¹ã¨åŒã˜ã§ã™ã€‚<br>æœ¬æ¥ã§ã‚ã‚Œã°Routeã¨Serviceã¯åˆ†é›¢ã—ã¦ã‚ã£ãŸæ–¹ãŒè‰¯ã„æ°—ãŒã—ã¾ã™ãŒä»Šå›ã¯æ°—ã«ã›ãšä¸€ä½“å‹ã«ã—ã¾ã™ã€‚<br>JSONã‚’ä½¿ã„ãŸã„ã®ã§SprayJsonSupportã‚’ç¶™æ‰¿ã—ã¦ã„ã¾ã™ã€ã“ã®è¾ºã¾ã Sprayã®ã¾ã¾ã¿ãŸã„ã§ã™ã­ã€‚<br>å…ˆã«å®šç¾©ã—ãŸJsonProtocolã‚’importã—ãªã„ã¨compileãŒé€šã‚‰ãªã„ã®ã§æ³¨æ„ã—ã¦ãã ã•ã„ã€‚</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> akka.http.scaladsl.marshallers.sprayjson.<span class="type">SprayJsonSupport</span></div><div class="line"><span class="keyword">import</span> akka.http.scaladsl.model._</div><div class="line"><span class="keyword">import</span> akka.http.scaladsl.server.<span class="type">Directives</span>._</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">trait</span> <span class="title">Route</span> <span class="keyword">extends</span> <span class="title">SprayJsonSupport</span> </span>&#123;</div><div class="line">  <span class="keyword">import</span> <span class="type">MyData</span>._</div><div class="line">  <span class="keyword">import</span> <span class="type">JsonProtocol</span>._</div><div class="line"></div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> db: <span class="type">DB</span></div><div class="line"></div><div class="line">  <span class="keyword">val</span> routes =</div><div class="line">    pathSingleSlash &#123;</div><div class="line">      get &#123;</div><div class="line">        <span class="comment">// GET localhost:8080</span></div><div class="line">        index()</div><div class="line">      &#125;</div><div class="line">    &#125; ~</div><div class="line">      path(<span class="string">"ping"</span>) &#123;</div><div class="line">        get &#123;</div><div class="line">          <span class="comment">// GET localhost:8080/ping</span></div><div class="line">          complete(<span class="string">"pong"</span>)</div><div class="line">        &#125;</div><div class="line">      &#125; ~</div><div class="line">      pathPrefix(<span class="string">"users"</span>) &#123;</div><div class="line">        pathEndOrSingleSlash &#123;</div><div class="line">          get &#123;</div><div class="line">            <span class="comment">// GET localhost:8080/users</span></div><div class="line">            getUsers()</div><div class="line">          &#125; ~</div><div class="line">            post &#123;</div><div class="line">              <span class="comment">// POST localhost:8080/users</span></div><div class="line">              entity(as[<span class="type">CreateUserRequest</span>]) &#123; request =&gt;</div><div class="line">                createUser(request.name)</div><div class="line">              &#125;</div><div class="line">            &#125;</div><div class="line">        &#125; ~</div><div class="line">          path(<span class="type">IntNumber</span>) &#123; id =&gt;</div><div class="line">            get &#123;</div><div class="line">              <span class="comment">// GET localhost:8080/users.:id</span></div><div class="line">              getUser(id)</div><div class="line">            &#125; ~</div><div class="line">              patch &#123;</div><div class="line">                <span class="comment">// PATCH localhost:8080/users.:id</span></div><div class="line">                entity(as[<span class="type">UpdateUserRequest</span>]) &#123; request =&gt;</div><div class="line">                  updateUser(id, request.name)</div><div class="line">                &#125;</div><div class="line">              &#125; ~</div><div class="line">              delete &#123;</div><div class="line">                <span class="comment">// DELETE localhost:8080/users.:id</span></div><div class="line">                deleteUser(id)</div><div class="line">              &#125;</div><div class="line">          &#125;</div><div class="line">      &#125;</div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">index</span></span>() = complete(</div><div class="line">    <span class="type">HttpResponse</span>(</div><div class="line">      entity = <span class="type">HttpEntity</span>(</div><div class="line">        <span class="type">ContentTypes</span>.`text/html(<span class="type">UTF</span><span class="number">-8</span>)`,</div><div class="line">        &lt;html&gt;</div><div class="line">          &lt;body&gt;</div><div class="line">            &lt;h1&gt;<span class="type">Welcome</span> to &lt;i&gt;akka-http&lt;/i&gt;!&lt;/h1&gt;</div><div class="line">          &lt;/body&gt;</div><div class="line">        &lt;/html&gt;.toString</div><div class="line">      )</div><div class="line">    )</div><div class="line">  )</div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="keyword">val</span> userNotFound = <span class="string">"user_not_found"</span></div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">createUser</span></span>(name: <span class="type">String</span>)(<span class="keyword">implicit</span> db: <span class="type">DB</span>) =</div><div class="line">    db.createUser(name) <span class="keyword">match</span> &#123;</div><div class="line">      <span class="keyword">case</span> <span class="type">Left</span>(err) =&gt;</div><div class="line">        failWith(err)</div><div class="line">      <span class="keyword">case</span> <span class="type">Right</span>(user) =&gt;</div><div class="line">        complete(user)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">getUsers</span></span>()(<span class="keyword">implicit</span> db: <span class="type">DB</span>) =</div><div class="line">    db.getUsers <span class="keyword">match</span> &#123;</div><div class="line">      <span class="keyword">case</span> <span class="type">Left</span>(err) =&gt;</div><div class="line">        failWith(err)</div><div class="line">      <span class="keyword">case</span> <span class="type">Right</span>(users) =&gt;</div><div class="line">        complete(users)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">getUser</span></span>(id: <span class="type">Int</span>)(<span class="keyword">implicit</span> db: <span class="type">DB</span>) =</div><div class="line">    db.getUser(id) <span class="keyword">match</span> &#123;</div><div class="line">      <span class="keyword">case</span> <span class="type">Left</span>(err) =&gt;</div><div class="line">        failWith(err)</div><div class="line">      <span class="keyword">case</span> <span class="type">Right</span>(<span class="type">None</span>) =&gt;</div><div class="line">        complete(<span class="type">StatusCodes</span>.<span class="type">NotFound</span> -&gt; <span class="type">ErrorResponse</span>(userNotFound))</div><div class="line">      <span class="keyword">case</span> <span class="type">Right</span>(<span class="type">Some</span>(user)) =&gt;</div><div class="line">        complete(user)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">updateUser</span></span>(id: <span class="type">Int</span>, name: <span class="type">String</span>)(<span class="keyword">implicit</span> db: <span class="type">DB</span>) =</div><div class="line">    db.updateUser(id, name) <span class="keyword">match</span> &#123;</div><div class="line">      <span class="keyword">case</span> <span class="type">Left</span>(err) =&gt;</div><div class="line">        failWith(err)</div><div class="line">      <span class="keyword">case</span> <span class="type">Right</span>(<span class="type">None</span>) =&gt;</div><div class="line">        complete(<span class="type">StatusCodes</span>.<span class="type">NotFound</span> -&gt; <span class="type">ErrorResponse</span>(userNotFound))</div><div class="line">      <span class="keyword">case</span> <span class="type">Right</span>(<span class="type">Some</span>(user)) =&gt;</div><div class="line">        complete(user)</div><div class="line">    &#125;</div><div class="line"></div><div class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">deleteUser</span></span>(id: <span class="type">Int</span>)(<span class="keyword">implicit</span> db: <span class="type">DB</span>) =</div><div class="line">    db.deleteUser(id) <span class="keyword">match</span> &#123;</div><div class="line">      <span class="keyword">case</span> <span class="type">Left</span>(err) =&gt;</div><div class="line">        failWith(err)</div><div class="line">      <span class="keyword">case</span> <span class="type">Right</span>(()) =&gt;</div><div class="line">        complete(<span class="type">StatusCodes</span>.<span class="type">OK</span>)</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>indexã¨pingã¯é–¢ä¿‚ãªã„ã§ã™ãŒã‚µãƒ³ãƒ—ãƒ«ã¨ã—ã¦è¿½åŠ ã—ã¾ã—ãŸã€‚<br>ãƒªã‚¯ã‚¨ã‚¹ãƒˆã®å‡¦ç†ãŒå®Œäº†ã—ã¦æ‰‹ã£å–ã‚Šæ—©ãOKã ã‘è¿”ã—ãŸã„æ™‚ã¯<code>StatusCodes.OK</code>ã‚’ä½¿ã£ã¦ã‚ã’ã‚‹ã¨ç°¡å˜ã§ã™ã€‚<br>å…¨ä½“çš„ã«ç‰¹ã«é›£ã—ã„ã¨ã“ã‚ã‚‚ãªãå‰²ã¨ç›´æ„Ÿçš„ã«æ›¸ã‘ã‚‹ã¨ã“ã‚ã¯è‰¯ã„ã§ã™ã­ã€‚<br>ä»–ã«ä¾¿åˆ©ãªrouting DSLã‚‚ãŸãã•ã‚“ã‚ã‚‹ã®ã§å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§é©å®œæ¢ã—ã¦ã¿ã‚‹ã¨è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚<br>æ¬¡ã«DBã®ãƒ¢ãƒƒã‚¯ã‚’ã“ã‚“ãªæ„Ÿã˜ã«ä½œã£ã¦ãŠãã¾ã™ã€‚</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> <span class="type">MyData</span>.<span class="type">User</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">trait</span> <span class="title">DB</span> </span>&#123;</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">createUser</span></span>(name: <span class="type">String</span>): <span class="type">Either</span>[<span class="type">Throwable</span>, <span class="type">User</span>]</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getUsers</span></span>: <span class="type">Either</span>[<span class="type">Throwable</span>, <span class="type">Seq</span>[<span class="type">User</span>]]</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getUser</span></span>(id: <span class="type">Int</span>): <span class="type">Either</span>[<span class="type">Throwable</span>, <span class="type">Option</span>[<span class="type">User</span>]]</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">updateUser</span></span>(id: <span class="type">Int</span>, name: <span class="type">String</span>): <span class="type">Either</span>[<span class="type">Throwable</span>, <span class="type">Option</span>[<span class="type">User</span>]]</div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">deleteUser</span></span>(id: <span class="type">Int</span>): <span class="type">Either</span>[<span class="type">Throwable</span>, <span class="type">Unit</span>]</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">object</span> <span class="title">MockDB</span> <span class="keyword">extends</span> <span class="title">DB</span> </span>&#123;</div><div class="line">  <span class="keyword">private</span> <span class="keyword">var</span> user_table = <span class="type">Seq</span>[<span class="type">User</span>]()</div><div class="line">  <span class="keyword">private</span> <span class="keyword">var</span> next_user_id = <span class="number">0</span></div><div class="line">  <span class="keyword">private</span> <span class="function"><span class="keyword">def</span> <span class="title">nextId</span></span>() = &#123;</div><div class="line">    next_user_id += <span class="number">1</span></div><div class="line">    next_user_id</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">createUser</span></span>(name: <span class="type">String</span>) = &#123;</div><div class="line">    <span class="keyword">val</span> user = <span class="type">User</span>(nextId(), name)</div><div class="line">    user_table = user_table :+ user</div><div class="line">    <span class="type">Right</span>(user)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getUsers</span> </span>= <span class="type">Right</span>(user_table)</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">getUser</span></span>(id: <span class="type">Int</span>) = <span class="type">Right</span>(user_table.find(_.id == id))</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">updateUser</span></span>(id: <span class="type">Int</span>, name: <span class="type">String</span>) = &#123;</div><div class="line">    user_table = user_table.map(u =&gt;</div><div class="line">      <span class="keyword">if</span> (u.id == id) u.copy(name = name)</div><div class="line">      <span class="keyword">else</span> u</div><div class="line">    )</div><div class="line">    getUser(id)</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  <span class="function"><span class="keyword">def</span> <span class="title">deleteUser</span></span>(id: <span class="type">Int</span>) = &#123;</div><div class="line">    user_table = user_table.filterNot(_.id == id)</div><div class="line">    <span class="type">Right</span>(())</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>Boot(Main)ã‚’æ›¸ã„ã¦ã„ãã¾ã™ã€‚ã“ã®è¾ºã¯Sprayã¨ã¡ã‚‡ã£ã¨ç•°ãªã‚‹éƒ¨åˆ†ãªã®ã§æ³¨æ„ã—ãªãŒã‚‰ã‚„ã£ã¦ã¿ã¦ãã ã•ã„ã€‚<br>bindingãŒå¤±æ•—ã—ãŸã¨ãã®ãŸã‚ã«loggerã‚’ä»•è¾¼ã‚“ã§ã„ã¾ã™ã€‚</p>
<figure class="highlight scala"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> akka.actor.<span class="type">ActorSystem</span></div><div class="line"><span class="keyword">import</span> akka.event.<span class="type">Logging</span></div><div class="line"><span class="keyword">import</span> akka.http.scaladsl.<span class="type">Http</span></div><div class="line"><span class="keyword">import</span> akka.stream.<span class="type">ActorMaterializer</span></div><div class="line"></div><div class="line"><span class="class"><span class="keyword">object</span> <span class="title">Boot</span> <span class="keyword">extends</span> <span class="title">App</span> <span class="keyword">with</span> <span class="title">Route</span> </span>&#123;</div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">lazy</span> <span class="keyword">val</span> system = <span class="type">ActorSystem</span>(<span class="string">"my-system"</span>)</div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">lazy</span> <span class="keyword">val</span> materializer = <span class="type">ActorMaterializer</span>()</div><div class="line">  <span class="keyword">override</span> <span class="keyword">implicit</span> <span class="keyword">val</span> db = <span class="type">MockDB</span></div><div class="line">  <span class="keyword">implicit</span> <span class="keyword">val</span> ec = system.dispatcher</div><div class="line">  <span class="keyword">val</span> interface = <span class="string">"localhost"</span></div><div class="line">  <span class="keyword">val</span> port = <span class="number">8080</span></div><div class="line">  <span class="keyword">val</span> logger = <span class="type">Logging</span>(system, getClass)</div><div class="line">  <span class="keyword">val</span> binding = <span class="type">Http</span>().bindAndHandle(routes, interface, port)</div><div class="line"></div><div class="line">  binding.onFailure &#123;</div><div class="line">    <span class="keyword">case</span> err: <span class="type">Exception</span> =&gt;</div><div class="line">      logger.error(err, <span class="string">s"Failed to bind to <span class="subst">$interface</span> <span class="subst">$port</span>"</span>)</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ã“ã“ã¾ã§ããŸã‚‰sbtã§reStartã—ã¦ã¿ã¦ãã ã•ã„ã€API ServerãŒç«‹ã¡ä¸ŠãŒã‚‹ã¨æ€ã„ã¾ã™ã€‚<br>jarãŒæ¬²ã—ã„å ´åˆã¯<code>sbt assembly</code>ã§jarãŒç”Ÿæˆã•ã‚Œã¾ã™ã€Stand-aloneãªjarãªã®ã§æ‰±ã„ã‚„ã™ã„ã®ãŒå¬‰ã—ã„ã§ã™ã€‚</p>
<p>Akka-HTTPã¯æœ¬å½“ã«Sprayã¨ã»ã¼åŒã˜æ„Ÿã˜ã§ã‹ã‘ã‚‹ã®ã§ä½¿ã£ãŸã“ã¨ã‚ã‚‹äººã¯ã¨ã£ã¤ãã‚„ã™ã„ã¨æ€ã„ã¾ã—ãŸã€‚<br>ç¾åœ¨ã¯ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒãƒ¥ãƒ¼ãƒ‹ãƒ³ã‚°ã‚’ä¸­å¿ƒã«é–‹ç™ºã—ã¦ã„ã‚‹ã‚ˆã†ãªã®ã§ã©ã“ã¾ã§Sprayã«è¿‘ã¥ã‘ã‚‹ã®ã‹æ¥½ã—ã¿ã§ã™ã­ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Akka-HTTP&quot;&gt;&lt;a href=&quot;#Akka-HTTP&quot; class=&quot;headerlink&quot; title=&quot;Akka-HTTP&quot;&gt;&lt;/a&gt;Akka-HTTP&lt;/h1&gt;&lt;p&gt;Akka-HTTPã¯Akka-Actorã¨Akka-Streamsã‚’ãƒ™ãƒ¼ã‚¹ã¨ã—ãŸAk
    
    </summary>
    
    
      <category term="akka" scheme="http://t-hiroyoshi.github.io/tags/akka/"/>
    
      <category term="scala" scheme="http://t-hiroyoshi.github.io/tags/scala/"/>
    
      <category term="server" scheme="http://t-hiroyoshi.github.io/tags/server/"/>
    
      <category term="spray" scheme="http://t-hiroyoshi.github.io/tags/spray/"/>
    
  </entry>
  
  <entry>
    <title>CyberAgentã•ã‚“ã®ã‚¢ãƒ‰ãƒ†ã‚¯ã‚³ãƒ³ãƒšã§ç‰¹åˆ¥è³é ‚ã„ãŸè©±</title>
    <link href="http://t-hiroyoshi.github.io/adtech-compe/"/>
    <id>http://t-hiroyoshi.github.io/adtech-compe/</id>
    <published>2016-03-01T16:22:05.000Z</published>
    <updated>2016-04-16T09:13:04.000Z</updated>
    
    <content type="html"><![CDATA[<p>ã“ã‚“ã«ã¡ã¯ã€t-hiroyoshiã§ã™ã€‚<br>ãƒãƒƒã‚«ã‚½ãƒ³ãƒ‡ãƒ“ãƒ¥ãƒ¼ï¼ã¨ã„ã†ã“ã¨ã§CyberAgentã•ã‚“ä¸»å‚¬ã®ã‚¢ãƒ‰ãƒ†ã‚¯ã‚³ãƒ³ãƒšã«å‚åŠ ã—ã¦ããŸè©±ã§ã™ã€‚</p>
<p>ä»Šå›ã®ãƒ†ãƒ¼ãƒã¯ã‚¢ãƒ‰ãƒ†ã‚¯ã§åºƒå‘Šå…¥æœ­ã®éƒ¨åˆ†ã«é–¢ã‚ã‚‹DSP(Demand-Side Platform)ã‚’ä½œã‚‹ã¨ã„ã†ã‚‚ã®ã§ã—ãŸã€‚<br>DSPã¨ã¯é£›ã‚“ã§ãã‚‹å…¥æœ­ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã«å¯¾ã—ã„ãã‚‰ã§ã©ã‚“ãªåºƒå‘Šã‚’å‡ºã—ãŸã„ã‹ã‚’è¿”ã™ã‚‚ã®ã§ã™ã€ãªã®ã§æ±‚ã‚ã‚‰ã‚Œã‚‹ã‚‚ã®ã¨ã—ã¦ã¯é«˜ãƒˆãƒ©ãƒ•ã‚£ãƒƒã‚¯(ä»Šå›ã¯2000QPS)ã‚’ã•ã°ãã¤ã¤é…ä¿¡ã™ã‚‹åºƒå‘Šã‚’é¸ã³é©åˆ‡ãªä¾¡æ ¼ã§å…¥æœ­ã§ãã‚‹ã‚‚ã®ã¨ã„ã£ãŸæ„Ÿã˜ã§ã™ã€‚ã•ã‚‰ã«DSPã«ã¯å¿œç­”é€Ÿåº¦ã‚‚å•ã‚ã‚Œä»Šå›ã¯100msä»¥å†…ã«ãƒ¬ã‚¹ãƒãƒ³ã‚¹ãŒè¿”ã›ãªã„ã‚‚ã®ã¯ç„¡åŠ¹ã«ãªã‚‹ã¨ã„ã†è¨­å®šã§ã—ãŸã€‚æœ€çµ‚çš„ãªè©•ä¾¡ã¯CPC(ã‚¯ãƒªãƒƒã‚¯ã‚ãŸã‚Šã®ã‚³ã‚¹ãƒˆ)ã¨äºˆç®—ã®æ¶ˆåŒ–ç‡ã§è¡Œã‚ã‚Œã¾ã—ãŸã€‚</p>
<p>å‚åŠ ã—ãŸç†ç”±ã§ã™ãŒãã‚ãã‚ãƒ—ãƒ­ã‚°ãƒ©ãƒŸãƒ³ã‚°ã‚„ã‚Šå§‹ã‚ã¦1å¹´ã ã—ãƒãƒƒã‚«ã‚½ãƒ³çš„ãªã®ã«å‡ºã¦ã¿ãŸã„ãªã£ã¦æ€ã£ã¦ã„ãŸæ™‚ã«ScalaMatsuri2016ã§è¦‹ã‹ã‘ãŸCyberAgentã•ã‚“ã®ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸è¦‹ã¦ã¿ã¦ã¿ãŸã‚‰å­¦ç”Ÿå‘ã‘ã®ãƒãƒƒã‚«ã‚½ãƒ³ã®å‚åŠ è€…ã‚’å‹Ÿé›†ã—ã¦ã„ã¦ã€ä½•ã‹é¢ç™½ãã†ã ã—å¿œå‹Ÿã—ã¦ã¿ãŸã¨ã“ã‚å‚åŠ æ¨©ã‚’è²°ãˆãŸã¨ã„ã†ã®ãŒç†ç”±ã§ã™ã€‚</p>
<h1 id="ä½œã£ãŸã‚‚ã®-ä½œã‚ã†ã¨ã—ãŸã‚‚ã®"><a href="#ä½œã£ãŸã‚‚ã®-ä½œã‚ã†ã¨ã—ãŸã‚‚ã®" class="headerlink" title="ä½œã£ãŸã‚‚ã®(ä½œã‚ã†ã¨ã—ãŸã‚‚ã®)"></a>ä½œã£ãŸã‚‚ã®(ä½œã‚ã†ã¨ã—ãŸã‚‚ã®)</h1><p>åƒ•ã®ãƒãƒ¼ãƒ ã¯ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ã®è‡ªåˆ†ã¨ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆã®Sou Konishi, Kouichi Takayamaã®3äººãƒãƒ¼ãƒ ã§ã—ãŸã€‚ãŠäº’ã„ã®å¼·ã¿ã‚’ç”Ÿã‹ã—ã¤ã¤ãªã‚‹ã¹ãä¾å­˜ã—åˆã‚ãªã„ã‚ˆã†ãªè¨­è¨ˆã‚’ã—ã‚ˆã†ã¨ä»¥ä¸‹ã®ã‚ˆã†ãªã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ã—ã¾ã—ãŸã€‚</p>
<p><img src="/img/adtechArchitecture.png" alt="architecture" title="architecture"></p>
<p>æœ€åˆã¯AWSã«ä¾å­˜ã—ã™ãã‚‹ã®ãŒå«Œã ã£ãŸã®ã§Kinesisã§ã¯ãªãKafka Clusterä½¿ã„ãŸã‹ã£ãŸã®ã§ã™ãŒã€æ™‚é–“çš„ã«å³ã—ã„ã¨åˆ¤æ–­ã—ã¦å¤§äººã—ãKinesisä½¿ã„ã¾ã—ãŸã€‚ã¾ãŸConsumerå´ã¯ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ç¾¤ãªã®ã§æ‹¡å¼µæ€§ãŒã‚ã‚Šã€æ–°ãŸãªæ©Ÿèƒ½ã‚’è¿½åŠ ã—ã‚„ã™ã„ã‹ãªã¨ã‹è€ƒãˆã¾ã—ãŸã€‚<br>ã‚¤ãƒ¡ãƒ¼ã‚¸ã¨ã—ã¦ã¯Scalaã‚’ãƒã‚¤ã‚¯ãƒ­ã‚µãƒ¼ãƒ“ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ çš„ãªç«‹ã¡ä½ç½®ã§ç½®ã„ã¦ã‚¹ã‚±ãƒ¼ãƒ«ã•ã›ãŸã‹ã£ãŸæ„Ÿã˜ã§ã™ã€‚<br>Producer~Consumeré–“ã§è©•ä¾¡ãƒ¢ãƒ‡ãƒ«ã®å—ã‘æ¸¡ã—ã‚’ã©ã†ã™ã‚‹ã®ã‹è¿·ã£ã¦ã„ã¾ã—ãŸãŒã€Kinesisã‚’ä½¿ã†ã“ã¨ã«ã—ãŸã®ã§AWSã©ã£ã·ã‚Šã§è‰¯ã„ã‚„ã£ã¦ãªã£ã¦ã‚ã£ã¡ã‚ƒæ—©ã¨å™‚ã®Memcachedã‚’ElastiCacheä¸Šã§ä½¿ã†ã“ã¨ã«ã—ã¾ã—ãŸã€‚Memcachedä½¿ã£ãŸã“ã¨ãªã‹ã£ãŸã®ã§ã©ã†ã„ã†æ„Ÿã˜ã«ä½¿ãˆã°è‰¯ã„ã‹åˆ†ã‹ã‚‰ãšConsumerå´(Python)ã§ã‚»ãƒƒãƒˆã™ã‚‹ã¨ä½™è¨ˆãªãƒ˜ãƒƒãƒ€ãŒä»˜ã„ã¦ãã‚‹ã¨ã‹ã«æ‚©ã¾ã•ã‚ŒScalaã®ãƒ‘ãƒ¼ã‚µãƒ¼æ›¸ãã®ãŒè¾›ã‹ã£ãŸã§ã™ã€‚<br>è©•ä¾¡ãƒ¢ãƒ‡ãƒ«ã®ç”Ÿæˆã¯ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆã®2äººãŒKinesisã®å¼·ã¿ã‚’ç”Ÿã‹ã—ãŸã‚ªãƒ³ãƒ©ã‚¤ãƒ³å­¦ç¿’ãƒ™ãƒ¼ã‚¹ã§éšæ™‚æœ€æ–°ã®ãƒ¢ãƒ‡ãƒ«ã‚’Exportã§ãã‚‹ã‚ˆã†ã«ã—ã¦ãã‚Œã¾ã—ãŸã€‚åƒ•ã¯ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆã®2äººãŒJupyterä½¿ã£ã¦ãƒ‡ãƒ¼ã‚¿ã“ã­ãã‚Šå›ã—ã¦ã„ã‚‹ã®ã‚’è¦‹ã¦ã¯ãƒ¼ã™ã£ã’ã£ã¦ãªã£ã¦ã¾ã—ãŸã€‚<br>Akkaã«ã¯KamonãŒä»•è¾¼ã‚“ã§ã‚ã£ã¦ã€Actorã®æœ€é©åŒ–ã‚„ç›£è¦–ã«ä½¿ã†äºˆå®šã§ã—ãŸãŒæ™‚é–“åˆ‡ã‚Œã§ä»•è¾¼ã‚“ã ã ã‘ã«ãªã£ã¦ã—ã¾ã„ã¾ã—ãŸã€‚</p>
<p>æœ€çµ‚çš„ã«éª¨çµ„ã¿ã‚’ä½œã‚Šãã‚ŠProducerå´ã‚‚ä¸Šæ‰‹ãåˆ†æ•£åŒ–ãŒã§ããŸã®ã§ã™ãŒã€è©•ä¾¡ãƒ¢ãƒ‡ãƒ«ã®èª­ã¿è¾¼ã¿ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã¨è©•ä¾¡ãƒ¢ãƒ‡ãƒ«ã®å±•é–‹å¼ã‚’ãƒŸã‚¹ã£ã¦è¨ˆç®—ãŒçˆ†ç™ºã—ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ¶ˆåŒ–ã—ãã‚Œãªãã¦Actoræ­»ã«ã¾ãã‚‹ã¿ãŸã„ã«ãªã£ã¦ã¾ã¨ã‚‚ã«å‹•ãã¾ã›ã‚“ã§ã—ãŸã€Kamonç”Ÿã‹ã›ãªã‹ã£ãŸâ€¦<br>å®Œå…¨ã«ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªã‚½ãƒ¼ã‚¹ãŒè¶³ã‚Šã¦ãŠã‚‰ãšä½œã‚Šè¾¼ã¿ä¸è¶³ã§ã—ãŸã€ã”ã‚ã‚“ãªã•ã„ã€‚</p>
<p>é–‹ç™ºå¾Œã«ãƒãƒ¼ãƒ ã§ãƒ—ãƒ¬ã‚¼ãƒ³ã‚’ã™ã‚‹æ©Ÿä¼šãŒã‚ã£ãŸã®ã§ã™ãŒã€å¾¹å¤œé–‹ç™ºã«åŠ ãˆæœ¬ç•ªã§ã¾ã¨ã‚‚ã«å‹•ã‹ãªã‹ã£ãŸçµ¶æœ›æ„Ÿã‹ã‚‰é ­ãŠã‹ã—ã„æ„Ÿã˜ã®ãƒ—ãƒ¬ã‚¼ãƒ³ã«ãªã£ã¦ã„ãŸã¨æ€ã„ã¾ã™(ç¬‘)ã€‚<br>ã§ã™ãŒã€å¬‰ã—ã„ã“ã¨ã«æŠ€è¡“é¸å®šã‚„è¨­è¨ˆã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å­¦ç¿’ãªã©ã‚’è©•ä¾¡ã—ã¦é ‚ããªã‚“ã¨<strong>ç‰¹åˆ¥è³</strong>ã‚’é ‚ãã“ã¨ãŒã§ãã¾ã—ãŸã€‚</p>
<h1 id="æ„Ÿæƒ³ã¨åçœ"><a href="#æ„Ÿæƒ³ã¨åçœ" class="headerlink" title="æ„Ÿæƒ³ã¨åçœ"></a>æ„Ÿæƒ³ã¨åçœ</h1><p>ä»Šå›ã¯CyberAgentã•ã‚“ä¸»å‚¬ã ã£ãŸã®ã§ãƒ¬ãƒƒãƒ‰ãƒ–ãƒ«ã‚’å‡ºã—ã¦ãã‚ŒãŸã‚ŠãŠè“å­é£Ÿã¹æ”¾é¡Œã ã£ãŸã‚Šãƒ”ã‚¶ãŒé£Ÿã¹ã‚‰ã‚ŒãŸã‚Šç¾å‘³ã—ã„ã‚³ãƒ¼ãƒ’ãƒ¼ã‚’æº–å‚™ã—ã¦ãã‚ŒãŸã‚Šç’°å¢ƒã¨ã—ã¦ã¯è‡³ã‚Œã‚Šå°½ãã›ã‚Šã§é–‹ç™ºã«é›†ä¸­ã™ã‚‹ã“ã¨ãŒã§ãã¾ã—ãŸã€æ„Ÿè¬ã§ã™ã€‚</p>
<p>ãƒãƒ¼ãƒ ãƒ¡ã‚¤ãƒˆã¨ã®çµ†ã‚‚(å¾¹å¤œã®)é–‹ç™ºã‚’é€šã—ã¦ç”Ÿã¾ã‚Œã¦ã¨ã¦ã‚‚æ¿ƒã„ãƒãƒƒã‚«ã‚½ãƒ³ã«ãªã‚Šã¾ã—ãŸã€‚<br>ä»Šå›ã¯é–‹ç™ºæ™‚é–“çš„ã«å¿™ã—ã™ãã¦ãƒ¡ãƒ³ã‚¿ãƒ¼ã®æ–¹ã€…ã¨ã‚ã¾ã‚Šäº¤æµã§ããªã‹ã£ãŸã®ã§å°‘ã—æ®‹å¿µã§ã—ãŸãŒã€Kinesisã®æƒ…å ±ã‚’é ‚ã„ãŸã‚Šã§ããŸã®ã§è‰¯ã‹ã£ãŸã§ã™ã€‚<br>Kinesisã‚„Memcachedã¨ã„ã£ãŸæŠ€è¡“ã¯ä½¿ã£ãŸã“ã¨ãŒãªã‹ã£ãŸã‚‚ã®ãªã®ã§ã“ã®æ©Ÿä¼šã«ä½¿ãˆã‚‹ã“ã¨ãŒã§ãã¦è‰¯ã‹ã£ãŸã§ã™ãŒã€åˆãƒãƒƒã‚«ã‚½ãƒ³ã¨ã„ã†ã“ã¨ã§å¼µã‚Šåˆ‡ã‚Šã™ãã¦æŠ€è¡“é¸å®šã‚’å¤§ããã—ã™ããŸæ„ŸãŒã‚ã£ã¦ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªã‚½ãƒ¼ã‚¹ãŒè¶³ã‚Šãšæœ€å¾Œã¾ã§ä½œã‚Šè¾¼ã‚ã¾ã›ã‚“ã§ã—ãŸã€‚ä»Šå›å‚åŠ ã—ã¦ã¿ã¦å®Ÿéš›ã®ãƒªã‚½ãƒ¼ã‚¹æ„Ÿã‚’ä½“æ„Ÿã§ããŸã®ã§æ¬¡å›ã«ç”Ÿã‹ã—ãŸã„ã¨æ€ã„ã¾ã™ã€‚ãƒãƒƒã‚«ã‚½ãƒ³ã«é™ã£ã¦ã¯ãƒ™ãƒ³ãƒ€ãƒ­ãƒƒã‚¯ã‚¤ãƒ³ã‚’è¨±å®¹ã—ã¦ã©ã£ã·ã‚Šæµ¸ã‹ã£ãŸæ–¹ãŒä»–ã«é›†ä¸­ã§ãã¦æ¥½ã¨ã‹è‰²ã€…ãªã“ã¨ã‚’å­¦ã³ã¾ã—ãŸã€‚</p>
<p>ã¾ã¨ã‚ã‚‹ã¨åˆãƒãƒƒã‚«ã‚½ãƒ³ã¯æœ¬ç•ªã§å‹•ã‹ãªã„ã¨ã„ã†çµ¶æœ›çš„ãªçµæœã«çµ‚ã‚ã‚Šã¾ã—ãŸãŒã€ç‰¹åˆ¥è³ã‚’è²°ãˆãŸã®ã§æ•‘ã‚ã‚Œã¾ã—ãŸã€‚ãƒãƒƒã‚«ã‚½ãƒ³çš„ãªçŸ­æœŸé›†ä¸­é–‹ç™ºã¯è‡ªåˆ†ã®æ€§æ ¼çš„ã«ã‹ãªã‚Šæ¥½ã—ã‚ãŸã®ã§ã“ã‚Œã‹ã‚‰ã‚‚ãƒãƒƒã‚«ã‚½ãƒ³ã«ç©æ¥µçš„ã«å‚åŠ ã—ã¦ã„ããŸã„ã§ã™ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;p&gt;ã“ã‚“ã«ã¡ã¯ã€t-hiroyoshiã§ã™ã€‚&lt;br&gt;ãƒãƒƒã‚«ã‚½ãƒ³ãƒ‡ãƒ“ãƒ¥ãƒ¼ï¼ã¨ã„ã†ã“ã¨ã§CyberAgentã•ã‚“ä¸»å‚¬ã®ã‚¢ãƒ‰ãƒ†ã‚¯ã‚³ãƒ³ãƒšã«å‚åŠ ã—ã¦ããŸè©±ã§ã™ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå›ã®ãƒ†ãƒ¼ãƒã¯ã‚¢ãƒ‰ãƒ†ã‚¯ã§åºƒå‘Šå…¥æœ­ã®éƒ¨åˆ†ã«é–¢ã‚ã‚‹DSP(Demand-Side Platform)ã‚’ä½œã‚‹ã¨ã„ã†ã‚‚ã®
    
    </summary>
    
    
      <category term="akka" scheme="http://t-hiroyoshi.github.io/tags/akka/"/>
    
      <category term="adtech" scheme="http://t-hiroyoshi.github.io/tags/adtech/"/>
    
      <category term="aws" scheme="http://t-hiroyoshi.github.io/tags/aws/"/>
    
      <category term="scala" scheme="http://t-hiroyoshi.github.io/tags/scala/"/>
    
      <category term="hackathon" scheme="http://t-hiroyoshi.github.io/tags/hackathon/"/>
    
      <category term="server" scheme="http://t-hiroyoshi.github.io/tags/server/"/>
    
  </entry>
  
  <entry>
    <title>Reactã§Drag&amp;Drop</title>
    <link href="http://t-hiroyoshi.github.io/react-drag-drop/"/>
    <id>http://t-hiroyoshi.github.io/react-drag-drop/</id>
    <published>2015-12-14T13:00:00.000Z</published>
    <updated>2016-10-13T03:27:55.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ReactDnDã«ã¤ã„ã¦"><a href="#ReactDnDã«ã¤ã„ã¦" class="headerlink" title="ReactDnDã«ã¤ã„ã¦"></a>ReactDnDã«ã¤ã„ã¦</h1><p>Reactã§drag&amp;dropã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿè£…ã™ã‚‹ã®ã«ãŠãã‚‰ãä¸€ç•ªæœ‰å(Reduxä½œã£ãŸäººãŒä½œã£ãŸ)ã‹ã¤ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒè±Šå¯Œãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§ã™ã€‚<a href="http://gaearon.github.io/react-dnd/" target="_blank" rel="external">ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ</a>ã®æƒ…å ±é‡ãŒçµæ§‹å¤šãè‡ªç”±åº¦ãŒé«˜ãã¦æ··ä¹±ã—ã‚„ã™ã„ã®ã§è»½ãä½¿ã£ã¦ã¿ãŸã„äººå‘ã‘ã«æ ¸ã¨ãªã‚‹ã¨ã“ã‚ã ã‘è§£èª¬ã—ã¾ã™ã€‚Danã•ã‚“æœ¬å½“å¥½ãã€‚</p>
<h1 id="API"><a href="#API" class="headerlink" title="API"></a>API</h1><p>å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’drggable&amp;droppableåŒ–ã™ã‚‹ãŸã‚ã®APIãŒES7ã®decoratorã¨ã—ã¦æä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚<br>babel6ä½¿ã£ã¦ã„ã‚‹äººã¯decoratorãŒã¾ã å…¬å¼ã§ã¯å¯¾å¿œã—ã¦ã„ãªã„ã¿ãŸã„ãªã®ã§æ³¨æ„ã—ã¦ãã ã•ã„(babel5ãªã‚‰å¤§ä¸ˆå¤«ã§ã™)ã€‚å…¬å¼ã˜ã‚ƒãªã‘ã‚Œã°babel6ç”¨ã®ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ä½œã£ã¦ã„ã‚‹äººãŒã„ãŸã¨æ€ã†ã®ã§æ¢ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
<h2 id="DragSource"><a href="#DragSource" class="headerlink" title="DragSource"></a>DragSource</h2><p>ãƒ‰ãƒ©ãƒƒã‚°ã•ã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¤ã„ã¦ã®è¨­å®šã‚’è¡Œãˆã‚‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</div><div class="line"><span class="keyword">import</span> &#123; DragSource &#125; <span class="keyword">from</span> <span class="string">"react-dnd"</span>;</div><div class="line"></div><div class="line">@DragSouce(type, spec, collect)</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">DragComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="comment">// something</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>type</code>: dorpã•ã‚Œã‚‹å´ã¯ã“ã“ã§è¨­å®šã—ãŸ<code>type</code>ã‚’è¦‹ã¦dropã‚’å—ã‘å…¥ã‚Œã‚‹ã‹å¦ã‹ã‚’æ±ºã‚ã‚‹ã€Symbolã‹Stringã€‚</p>
<p><code>spec</code>: dragé–‹å§‹æ™‚ã®å‡¦ç†ã€dragçµ‚äº†æ™‚(dropã•ã‚ŒãŸæ™‚)ã®å‡¦ç†ã¨ã‹ã‚’æ›¸ã„ãŸObjectã€‚ä¾‹ãŒå¾ŒåŠã«ã‚ã‚Šã¾ã™ã€‚</p>
<p><code>collect</code>: <code>DragComponent</code>å†…ã§ä½¿ã†é–¢æ•°ã‚’å–ã‚Šå‡ºã™é–¢æ•°ã§objectã‚’è¿”ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚connectã¨monitorãŒå¼•æ•°ã¨ã—ã¦æ¸¡ã•ã‚Œã¾ã™ã€‚ã–ã£ãã‚Šè¨€ã†ã¨connectã¯DOMã«ã¤ã„ã¦ã€monitorã¯drag&amp;dropã®çŠ¶æ…‹ã«ã¤ã„ã¦ã®Objectã§ã™ã€çµæ§‹è‰²ã€…å–ã‚Œã‚‹ã®ã§å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆè¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
<h2 id="DropTarget"><a href="#DropTarget" class="headerlink" title="DropTarget"></a>DropTarget</h2><p>ãƒ‰ãƒ­ãƒƒãƒ—ã•ã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«ã¤ã„ã¦ã®è¨­å®šã‚’è¡Œãˆã‚‹ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</div><div class="line"><span class="keyword">import</span> &#123; DropTarget &#125; <span class="keyword">from</span> <span class="string">"react-dnd"</span>;</div><div class="line"></div><div class="line">@DropTarget(types, spec, collect)</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">DropComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="comment">// something</span></div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p><code>types</code>: dropã‚’å—ã‘å…¥ã‚Œã‚‹<code>type</code>ã‚’è¨­å®šã™ã‚‹ã€Symbolã‹Stringã‹Arrayã€‚</p>
<p><code>spec</code>: dropã‚’å—ã‘å…¥ã‚ŒãŸæ™‚ã®å‡¦ç†ã‚„hoverã•ã‚Œã¦ã„ã‚‹æ™‚ã®å‡¦ç†ã‚’æ›¸ã„ãŸObjectã€‚ä¾‹ãŒå¾ŒåŠã«ã‚ã‚Šã¾ã™ã€‚</p>
<p><code>collect</code>: DragSourceã®<code>collect</code>ã¨åŒã˜</p>
<h2 id="DragDropContext"><a href="#DragDropContext" class="headerlink" title="DragDropContext"></a>DragDropContext</h2><p>ä¸Šè¨˜ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆé”ã‚’ã“ã„ã¤ã§ãƒ©ãƒƒãƒ—ã™ã‚‹ã“ã¨ã§åˆã‚ã¦drag&amp;dropãŒã§ãã‚‹ã‚ˆã†ã«ãªã‚‹ã€‚BackendãŒå¿…è¦ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</div><div class="line"><span class="keyword">import</span> HTML5Backend <span class="keyword">from</span> <span class="string">"react-dnd-html5-backend"</span>;</div><div class="line"><span class="keyword">import</span> &#123; DragDropContext &#125; <span class="keyword">from</span> <span class="string">"react-dnd"</span>;</div><div class="line"></div><div class="line">@DragDropContext(HTML5Backend)</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">DnDComponent</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="comment">// something</span></div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      <span class="comment">// DragComponent &amp; DropComponent</span></div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>ä¾‹ã§ã¯<code>HTML5Backend</code>ã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§ã‚¿ãƒƒãƒã«ã¯å¯¾å¿œã—ã¦ã„ã¾ã›ã‚“ã€‚ã‚¿ãƒƒãƒå¯¾å¿œã®Backendã‚‚ã‚ã‚‹ã®ã§ã‚¿ãƒƒãƒå¯¾å¿œã•ã›ãŸã„äººã¯æ¢ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
<h1 id="å®Ÿè£…ä¾‹"><a href="#å®Ÿè£…ä¾‹" class="headerlink" title="å®Ÿè£…ä¾‹"></a>å®Ÿè£…ä¾‹</h1><p>drag&amp;dropã™ã‚‹ã¨ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¡¨ç¤ºã™ã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã£ã¦ã¿ã¾ã™ã€‚</p>
<h2 id="DnDItem-Componentã‚’ä½œã‚‹"><a href="#DnDItem-Componentã‚’ä½œã‚‹" class="headerlink" title="DnDItem Componentã‚’ä½œã‚‹"></a>DnDItem Componentã‚’ä½œã‚‹</h2><p>å®Ÿéš›ã«drag&amp;dropã•ã‚Œã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚Šã¾ã™ã€‚<br>DragSourceã¨DropTargetã¯åŒæ™‚ã«ä½¿ã†ã“ã¨ã§dragã‚‚dropã‚‚ã§ãã‚‹ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’ä½œã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€‚</p>
<p>drag&amp;dropã•ã‚ŒãŸã¨ãã®actionã¯è¦ªã‹ã‚‰propsã¨ã—ã¦å—ã‘å–ã‚Šã¾ã™ã€‚<br>ã¾ãŸtypeã‚‚åŒæ§˜ã«è¦ªã‹ã‚‰propsã¨ã—ã¦å—ã‘å–ã£ã¦ã„ã¾ã™ã€‚</p>
<p>DragSourceã¨DropTargeté–“ã¯åŸºæœ¬çš„ã«monitorã‚’é€šã—ã¦å€¤ã®ã‚„ã‚Šå–ã‚Šã‚’ã—ã¾ã™ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</div><div class="line"><span class="keyword">import</span> &#123; DragSource, DropTarget &#125; <span class="keyword">from</span> <span class="string">"react-dnd"</span>;</div><div class="line"></div><div class="line"><span class="keyword">const</span> dragSpec = &#123;</div><div class="line">  <span class="comment">// dragãŒå§‹ã¾ã£ãŸã¨ãã®å‡¦ç†</span></div><div class="line">  beginDrag(props) &#123;</div><div class="line">    <span class="comment">// dragã•ã‚Œå§‹ã‚ãŸã‚‰è‡ªåˆ†ã®idã‚’è¿”ã™</span></div><div class="line">    <span class="keyword">const</span> &#123; id &#125; = props;</div><div class="line">    <span class="keyword">return</span> &#123; id &#125;;</div><div class="line">  &#125;,</div><div class="line"></div><div class="line">  <span class="comment">// dragãŒçµ‚ã‚ã£ãŸã¨ãã®å‡¦ç½®</span></div><div class="line">  endDrag(props, monitor) &#123;</div><div class="line">    <span class="comment">// beginDragã§è¿”ã•ã‚ŒãŸidã‚’å–ã£ã¦ãã‚‹</span></div><div class="line">    <span class="keyword">const</span> source = monitor.getItem();</div><div class="line">    <span class="comment">// dropSpecã®dropã§è¿”ã•ã‚ŒãŸidã‚’å–ã£ã¦ãã‚‹</span></div><div class="line">    <span class="keyword">const</span> target = monitor.getDropResult();</div><div class="line">    <span class="comment">// dropActionã‚’ç™ºç«ã•ã›ã‚‹</span></div><div class="line">    <span class="keyword">if</span> (target) props.dropAction(source.id, target.id);</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="keyword">const</span> dropSpec = &#123;</div><div class="line">  <span class="comment">// dropã•ã‚ŒãŸã¨ãã®å‡¦ç†</span></div><div class="line">  drop(props, monitor, component) &#123;</div><div class="line">    <span class="comment">// dropã•ã‚ŒãŸã‚‰è‡ªåˆ†ã®idã‚’è¿”ã™</span></div><div class="line">    <span class="keyword">const</span> &#123; id &#125; = props;</div><div class="line">    <span class="keyword">return</span> &#123; id &#125;;</div><div class="line">  &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// DropTargetã¨DragSourceã‚’ä½¿ã£ã¦ã„ã‚‹ã®ã§dragã‚‚dropã‚‚ã§ãã‚‹</span></div><div class="line">@DropTarget(<span class="function"><span class="params">props</span> =&gt;</span> props.type, dropSpec, connect =&gt; (&#123; <span class="attr">connectDropTarget</span>: connect.dropTarget() &#125;))</div><div class="line">@DragSource(<span class="function"><span class="params">props</span> =&gt;</span> props.type, dragSpec, connect =&gt; (&#123; <span class="attr">connectDragSource</span>: connect.dragSource() &#125;))</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">DnDItem</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">static</span> propTypes = &#123;</div><div class="line">    <span class="attr">connectDragSource</span>: React.PropTypes.func.isRequired,</div><div class="line">    <span class="attr">connectDropTarget</span>: React.PropTypes.func.isRequired,</div><div class="line">    <span class="attr">dropAction</span>: React.PropTypes.func.isRequired,</div><div class="line">    <span class="attr">id</span>: React.PropTypes.string.isRequired,</div><div class="line">    <span class="attr">name</span>: React.PropTypes.string.isRequired</div><div class="line">  &#125;;</div><div class="line"></div><div class="line">  render() &#123;</div><div class="line">    <span class="keyword">const</span> &#123;</div><div class="line">      connectDragSource,</div><div class="line">      connectDropTarget,</div><div class="line">      name</div><div class="line">    &#125; = <span class="keyword">this</span>.props;</div><div class="line"></div><div class="line">    <span class="keyword">return</span> connectDragSource(connectDropTarget(</div><div class="line">      &lt;li&gt;</div><div class="line">        &lt;h3&gt;&#123;name&#125;&lt;/h3&gt;</div><div class="line">      &lt;/li&gt;</div><div class="line">    ));</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="DnDField-Componentã‚’ä½œã‚‹"><a href="#DnDField-Componentã‚’ä½œã‚‹" class="headerlink" title="DnDField Componentã‚’ä½œã‚‹"></a>DnDField Componentã‚’ä½œã‚‹</h2><p>DnDItem Componentã‚’ãƒ©ãƒƒãƒ—ã™ã‚‹è¦ªç‰ã‚’ä½œã‚Šã¾ã™ã€stateã¯ã“ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã§ç®¡ç†ã—ã¦æ›´æ–°ç”¨ã®actionã‚’DnDItemã«æ¸¡ã—ã¾ã™ã€‚</p>
<p>ä»Šå›ã¯idã‚’keyã¨ã—ã¦æ¸¡ã—ã¦ã„ã¾ã™ã€keyã¯ReactDnDå†…éƒ¨ã§ã®DOMã®å‚ç…§ã«ä½¿ã‚ã‚Œã‚‹ã®ã§ValueObjectã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚ã‚ã¾ã‚Šã«ã‚‚é©å½“ãªã‚‚ã®ã‚’æ¸¡ã™ã¨å£Šã‚Œã‚‹ã®ã§æ°—ã‚’ã¤ã‘ã¦ãã ã•ã„(Reactå§‹ã‚ãŸã°ã£ã‹ã‚Šã®æ™‚Math.random()ã¨ã‹æ¸¡ã—ã¦ã¦æ­»ã«ãã†ã«ãªã£ãŸ)ã€‚</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">"react"</span>;</div><div class="line"><span class="keyword">import</span> HTML5Backend <span class="keyword">from</span> <span class="string">"react-dnd-html5-backend"</span>;</div><div class="line"><span class="keyword">import</span> &#123; DragDropContext &#125; <span class="keyword">from</span> <span class="string">"react-dnd"</span>;</div><div class="line"></div><div class="line"><span class="keyword">import</span> DnDItem <span class="keyword">from</span> <span class="string">"./DnDItem"</span>;</div><div class="line"></div><div class="line"><span class="comment">// DragDropContextã§ãƒ©ãƒƒãƒ—ã™ã‚‹</span></div><div class="line">@DragDropContext(HTML5Backend)</div><div class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="class"><span class="keyword">class</span> <span class="title">DnDField</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</div><div class="line">  <span class="keyword">constructor</span>(props) &#123;</div><div class="line">    <span class="keyword">super</span>(props);</div><div class="line">    <span class="keyword">this</span>.state = &#123;</div><div class="line">      <span class="attr">list</span>: [</div><div class="line">        &#123;<span class="attr">id</span>: <span class="string">"1"</span>, <span class="attr">name</span>: <span class="string">"foo"</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="string">"2"</span>, <span class="attr">name</span>: <span class="string">"bar"</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="string">"3"</span>, <span class="attr">name</span>: <span class="string">"bad"</span>&#125;,</div><div class="line">        &#123;<span class="attr">id</span>: <span class="string">"4"</span>, <span class="attr">name</span>: <span class="string">"qux"</span>&#125;</div><div class="line">      ],</div><div class="line">      <span class="attr">message</span>: <span class="string">""</span></div><div class="line">    &#125;;</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  dropAction(sourceId, targetId) &#123;</div><div class="line">    <span class="keyword">const</span> &#123; list &#125; = <span class="keyword">this</span>.state;</div><div class="line"></div><div class="line">    <span class="comment">// messageæ›´æ–° Reduxä½¿ã†ãªã‚‰ã“ã“ã§action, ãã‚Œãã‚Œã®idãŒæ¸¡ã£ã¦ãã‚‹</span></div><div class="line">    <span class="keyword">const</span> sourceName = list.find(<span class="function"><span class="params">item</span> =&gt;</span> item.id === sourceId).name;</div><div class="line">    <span class="keyword">const</span> targetName = list.find(<span class="function"><span class="params">item</span> =&gt;</span> item.id === targetId).name;</div><div class="line">    <span class="keyword">this</span>.setState(&#123;<span class="attr">message</span>: <span class="string">`<span class="subst">$&#123;sourceName&#125;</span> dropped on <span class="subst">$&#123;targetName&#125;</span>`</span>&#125;);</div><div class="line">  &#125;</div><div class="line"></div><div class="line">  render()</div><div class="line">    <span class="keyword">const</span> &#123; list, message &#125; = <span class="keyword">this</span>.state;</div><div class="line">    <span class="keyword">const</span> itemType = <span class="built_in">Symbol</span>(<span class="string">"item"</span>);</div><div class="line"></div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;div&gt;</div><div class="line">        &lt;h1&gt;&#123;message&#125;&lt;/h1&gt;</div><div class="line">        &lt;ol&gt;</div><div class="line">          &#123;list.map(item =&gt;</div><div class="line">            &lt;DnDItem id=&#123;item.id&#125; name=&#123;item.name&#125; type=&#123;itemType&#125; dropAction=&#123;::this.dropAction&#125; key=&#123;item.id&#125;/&gt;</div><div class="line">          )&#125;</div><div class="line">        &lt;/ol&gt;</div><div class="line">      &lt;/div&gt;</div><div class="line">    )</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h2><p>ã“ã‚Œã§dragã•ã‚ŒãŸComponentã®idã¨dropã•ã‚ŒãŸComponentã®idãŒå–å¾—ã§ãã‚‹å®Ÿè£…ãŒå‡ºæ¥ã¾ã—ãŸã€‚idãŒå–å¾—ã§ãã‚Œã°ã‚ã¨ã¯ã©ã†ã«ã§ã‚‚ã§ãã‚‹ã®ã§å®Ÿéš›ã®é–‹ç™ºã«ç”Ÿã‹ã™ã“ã¨ãŒã§ãã‚Œã°ã¨æ€ã„ã¾ã™ã€‚</p>
<p>ä»Šå›ç´¹ä»‹ã—ãŸã®ã¯ReactDnDã®ã»ã‚“ã®ä¸€éƒ¨ã§ä»–ã«ã‚‚ãŸãã•ã‚“ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚ã‚‹ã®ã§æ˜¯éãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’èª­ã‚“ã§ã‚«ã‚¹ã‚¿ãƒ ã—ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ReactDnDã«ã¤ã„ã¦&quot;&gt;&lt;a href=&quot;#ReactDnDã«ã¤ã„ã¦&quot; class=&quot;headerlink&quot; title=&quot;ReactDnDã«ã¤ã„ã¦&quot;&gt;&lt;/a&gt;ReactDnDã«ã¤ã„ã¦&lt;/h1&gt;&lt;p&gt;Reactã§drag&amp;amp;dropã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’å®Ÿè£…ã™
    
    </summary>
    
    
      <category term="javascript" scheme="http://t-hiroyoshi.github.io/tags/javascript/"/>
    
      <category term="reactjs" scheme="http://t-hiroyoshi.github.io/tags/reactjs/"/>
    
      <category term="client" scheme="http://t-hiroyoshi.github.io/tags/client/"/>
    
  </entry>
  
  <entry>
    <title>Hexoã‚’ä½¿ã£ã¦ç„¡æ–™ã§ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã™ã‚‹</title>
    <link href="http://t-hiroyoshi.github.io/start-hexo/"/>
    <id>http://t-hiroyoshi.github.io/start-hexo/</id>
    <published>2015-11-19T13:14:39.000Z</published>
    <updated>2016-03-19T10:25:59.000Z</updated>
    
    <content type="html"><![CDATA[<h1 id="ãªãœHexoãªã®ã‹"><a href="#ãªãœHexoãªã®ã‹" class="headerlink" title="ãªãœHexoãªã®ã‹"></a>ãªãœHexoãªã®ã‹</h1><ul>
<li>Node.jsã§ã‚„ã‚Œã‚‹</li>
<li>ã‚ã£ã¡ã‚ƒç°¡å˜ã«é™çš„ã‚µã‚¤ãƒˆã‚’æ§‹ç¯‰ã§ãã‚‹</li>
<li>ãƒ†ãƒ¼ãƒãŒå¤šãã¦å®Œæˆåº¦ãŒé«˜ã„ã€ã•ã‚‰ã«ã‚«ã‚¹ã‚¿ãƒ ã§ãã‚‹</li>
<li>Markdownã§è¨˜äº‹ãŒæ›¸ã‘ã‚‹ã®ã§å¬‰ã—ã„ã‚ˆ!<br><br></li>
</ul>
<h1 id="Hexoã‚’ä½¿ã£ã¦ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã™ã‚‹ã¾ã§ã®æ‰‹é †"><a href="#Hexoã‚’ä½¿ã£ã¦ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã™ã‚‹ã¾ã§ã®æ‰‹é †" class="headerlink" title="Hexoã‚’ä½¿ã£ã¦ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã™ã‚‹ã¾ã§ã®æ‰‹é †"></a>Hexoã‚’ä½¿ã£ã¦ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã™ã‚‹ã¾ã§ã®æ‰‹é †</h1><h2 id="Hexoã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹"><a href="#Hexoã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹" class="headerlink" title="Hexoã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹"></a>Hexoã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</h2><p>ã¾ãšã¯npmã§Hexoã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">npm install -g hexo</div></pre></td></tr></table></figure>
<p>æ¬¡ã«ãƒ–ãƒ­ã‚°ã®é››å½¢ã‚’ä½œæˆã—ã¦ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">hexo init &lt;your-blog-name&gt;</div><div class="line"><span class="built_in">cd</span> &lt;your-blog-name&gt;</div><div class="line">npm install</div></pre></td></tr></table></figure>
<p>ã“ã“ã¾ã§ãã‚Œã°å®Ÿéš›ã«ãƒšãƒ¼ã‚¸ã‚’è¦‹ã‚‹ã“ã¨ãŒå¯èƒ½ã§ã™ã€<code>hexo server</code>ã¨æ‰“ã£ãŸå¾Œ<a href="http://localhost:4000" target="_blank" rel="external">localhost:4000</a>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¦ãã ã•ã„ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ãƒ†ãƒ¼ãƒãªã®ã§å¥½ã¿ã¯ã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ãƒ†ãƒ¼ãƒã¯å¾Œã§å¤‰ãˆã‚‰ã‚Œã‚‹ã®ã§å®‰å¿ƒã—ã¦ãã ã•ã„!</p>
<h2 id="Github-Pagesã§ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã™ã‚‹"><a href="#Github-Pagesã§ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã™ã‚‹" class="headerlink" title="Github Pagesã§ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã™ã‚‹"></a>Github Pagesã§ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã™ã‚‹</h2><p>ãƒ–ãƒ­ã‚°ã‚’GitHub Pagesã‚’åˆ©ç”¨ã—ã¦å…¬é–‹ã—ã¦ã¿ã‚ˆã†ã¨æ€ã„ã¾ã™ã€ã¾ãšã¯<code>&lt;user-name&gt;.github.io</code>ã¨ã„ã†åå‰ã®ãƒ¬ãƒã‚¸ãƒˆãƒªã‚’ä½œæˆã—ã¾ã™ã€‚<br>ãƒ‡ãƒ—ãƒ­ã‚¤ã¯Gitã§è¡Œã„ãŸã„ã¨æ€ã†ã®ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">npm install hexo-deployer-git --save</div></pre></td></tr></table></figure>
<p>æ¬¡ã«ãƒ¬ãƒã‚¸ãƒˆãƒªã®ç™»éŒ²ã‚’è¡Œã„ã¾ã™ã€å…ˆã»ã©ä½œæˆã—ãŸé››å½¢ã®ä¸­ã«ã‚ã‚‹<code>_config.yml</code>ã‚’ä¸‹è¨˜ã®ã‚ˆã†ã«ç·¨é›†ã—ã¦ãã ã•ã„ã€‚</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><div class="line"><span class="comment"># Deployment</span></div><div class="line"><span class="attr">deploy:</span></div><div class="line"><span class="attr">  type:</span> git</div><div class="line"><span class="attr">  repo:</span> git@github.com:&lt;user-name&gt;/&lt;user-name&gt;.github.io.git</div><div class="line"><span class="attr">  branch:</span> master</div></pre></td></tr></table></figure>
<p>ã“ã‚Œã§ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã™ã‚‹æº–å‚™ã¯å®Œäº†ã§ã™ã€ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">hexo deploy -g</div></pre></td></tr></table></figure>
<p>ç„¡äº‹ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã§ããŸã‚‰<code>http://&lt;user-name&gt;.github.io</code>ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã¿ã¦ãã ã•ã„ã€ãƒ–ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã‚Œã°æˆåŠŸã§ã™!</p>
<h2 id="è¨˜äº‹ã®è¿½åŠ ã‚’ã™ã‚‹"><a href="#è¨˜äº‹ã®è¿½åŠ ã‚’ã™ã‚‹" class="headerlink" title="è¨˜äº‹ã®è¿½åŠ ã‚’ã™ã‚‹"></a>è¨˜äº‹ã®è¿½åŠ ã‚’ã™ã‚‹</h2><p>è¨˜äº‹ã®è¿½åŠ ã¯ä¸‹è¨˜ã®ã‚³ãƒãƒ³ãƒ‰ã‚’æ‰“ã¤ã“ã¨ã§å¯èƒ½ã§ã™ã€ã‚¿ã‚¤ãƒˆãƒ«ãŒãã®ã¾ã¾ãƒ•ã‚¡ã‚¤ãƒ«åã«ãªã‚‹ã®ã§æ—¥æœ¬èªãªã©ã¯é¿ã‘ãŸã»ã†ãŒè‰¯ã„ã§ã™ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">hexo new <span class="string">"page-title"</span></div></pre></td></tr></table></figure>
<p>ãã†ã™ã‚‹ã¨<code>source/_posts</code>ã®ä¸­ã«<code>page-title.md</code>ãŒã§ãã¦ã„ã‚‹ã¨æ€ã„ã¾ã™ã€Markdownã§ã‚´ãƒªã‚´ãƒªä¸­èº«ã‚’æ›¸ãã¾ã—ã‚‡ã†ã€‚<code>hexo server</code>ã§ã‚µãƒ¼ãƒãƒ¼ã‚’å‹•ã‹ã—ãªãŒã‚‰æ›¸ãã¨ãƒ–ãƒ©ã‚¦ã‚¶ã‚’ãƒªãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãŸã³ã«æ›´æ–°ã•ã‚Œã¦ã„ãã®ã§ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ä»£ã‚ã‚Šã«ä½¿ãˆã¾ã™ã€‚<br>è¨˜äº‹ã‚’æ›¸ãçµ‚ãˆãŸã‚‰å…¬é–‹ã—ã¦ã€Github Pagesã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦å®Ÿéš›ã«è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">hexo deploy -g</div></pre></td></tr></table></figure>
<h2 id="ãƒ†ãƒ¼ãƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹"><a href="#ãƒ†ãƒ¼ãƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹" class="headerlink" title="ãƒ†ãƒ¼ãƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹"></a>ãƒ†ãƒ¼ãƒã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹</h2><p>ã¾ãšã¯Githubãªã©ã§å°å…¥ã—ãŸã„ãƒ†ãƒ¼ãƒã‚’è¦‹ã¤ã‘ã¦ãã¦ãã ã•ã„ã€å¤šåˆ†<code>hexo theme</code>ã¨ã‹ã§æ¤œç´¢ã™ã‚‹ã¨ãŸãã•ã‚“å‡ºã¦ãã‚‹ã¨æ€ã„ã¾ã™ã€‚ç´°ã‹ã„éƒ¨åˆ†ã¯è‡ªåˆ†ã§å¤‰æ›´ã§ãã‚‹ã®ã§ã ã„ãŸã„é›°å›²æ°—ã§é¸ã‚“ã§è‰¯ã„ã¨æ€ã„ã¾ã™ã€‚è‰¯ã„æ„Ÿã˜ã®ãƒ†ãƒ¼ãƒãŒè¦‹ã¤ã‹ã£ãŸã‚‰ã‚¯ãƒ­ãƒ¼ãƒ³ã—ã¦ãã¾ã™ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line"><span class="built_in">cd</span> themes</div><div class="line">git <span class="built_in">clone</span> git@github.com:&lt;theme-auther&gt;/&lt;theme-name&gt;.git</div></pre></td></tr></table></figure>
<p>æ¬¡ã«å…ˆã»ã©ã®<code>_config.yml</code>ã‚’æ›¸ãæ›ãˆã¾ã™ã€‚</p>
<figure class="highlight yml"><table><tr><td class="code"><pre><div class="line"><span class="comment"># Extensions</span></div><div class="line"><span class="attr">theme:</span> &lt;theme-name<span class="string">&gt;</span></div></pre></td></tr></table></figure>
<p>ã“ã‚Œã§ãƒ†ãƒ¼ãƒãŒé©å¿œã•ã‚Œã¾ã—ãŸã€<code>hexo server</code>ã—ã¦å®Ÿéš›ã«è¦‹ã¦ã¿ã¦ãã ã•ã„ã€‚<br>ãƒ†ãƒ¼ãƒã®ç´°ã‹ã„è¨­å®šã¯ãã‚Œãã‚Œã®ãƒ†ãƒ¼ãƒã®<code>themes/&lt;theme-name&gt;/_config.yml</code>ã‚’å¤‰æ›´ã™ã‚‹ã“ã¨ã§å¯èƒ½ã§ã™ã€‚<br>ã‚ã‚‹ç¨‹åº¦æ°—ã«ã„ã‚‹å½¢ã«ãªã£ãŸã‚‰ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦å…¬é–‹ã—ã¾ã—ã‚‡ã†!</p>
<p>ãƒ†ãƒ¼ãƒã‚„ã‚¹ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒˆã‚’å¤‰æ›´ã—ãŸå¾Œã«ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã‚‚ãƒ‡ã‚¶ã‚¤ãƒ³ãŒå¤‰æ›´ã•ã‚Œãªã„ã“ã¨ãŒã‚ã‚‹ã¨æ€ã„ã¾ã™ãŒã€ã“ã‚Œã¯ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã§è§£æ±ºã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><div class="line">hexo clean</div></pre></td></tr></table></figure>
<p>ã“ã®å¾Œã«å†ã³ãƒ‡ãƒ—ãƒ­ã‚¤ã—ã¦ã¿ã¦ãã ã•ã„ã€ãƒ†ãƒ¼ãƒã‚„ãƒ‡ã‚¶ã‚¤ãƒ³ã‚·ãƒ¼ãƒˆã®å¤‰æ›´ãŒåæ˜ ã•ã‚Œã¦ã„ã‚‹ã¨æ€ã„ã¾ã™!</p>
<h1 id="ã¾ã¨ã‚"><a href="#ã¾ã¨ã‚" class="headerlink" title="ã¾ã¨ã‚"></a>ã¾ã¨ã‚</h1><p>Hexoã‚’ä½¿ã£ã¦ãƒ–ãƒ­ã‚°ã‚’å…¬é–‹ã™ã‚‹æ–¹æ³•ã‚’æ›¸ãã¾ã—ãŸã€‚<br>Hexoã¯é™çš„ã‚µã‚¤ãƒˆã®æ§‹ç¯‰ãŒæœ¬å½“ã«ç°¡å˜ã«ã§ãã‚‹ç´ æ™´ã‚‰ã—ã„ãƒ„ãƒ¼ãƒ«ã ã¨æ€ã„ã¾ã™ã€ãƒ†ãƒ¼ãƒã‚‚éå¸¸ã«å®Œæˆåº¦ãŒé«˜ã„ã‚‚ã®ãŒå¤šã„ã®ã§ä¸€ç¬ã«ã—ã¦ãã‚Œãªã‚Šã«ã¡ã‚ƒã‚“ã¨ã—ãŸãƒ–ãƒ­ã‚°ãŒä½œã‚Œã¦ã—ã¾ã†ã®ã¯æœ¬å½“ã«é©šãã§ã™ã€‚<br>ãŸã Hexoã‚’ä½¿ã£ã¦ã„ã¦ã²ã¨ã¤è¾›ã„ã®ã¯ä¸­å›½åœã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒå¤šã„ã®ã§è‹±èªã§ã¯ãªãä¸­å›½èªã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã€ãƒ‡ã‚£ã‚¹ã‚«ãƒƒã‚·ãƒ§ãƒ³ãŒå¤šã„ã¨ã„ã†ç‚¹ã§ã™ã€è‹±èªãªã‚‰ãã‚Œãªã‚Šã«èª­ã‚ã¾ã™ãŒä¸­å›½èªã¯è¾›ã„â€¦</p>
]]></content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;ãªãœHexoãªã®ã‹&quot;&gt;&lt;a href=&quot;#ãªãœHexoãªã®ã‹&quot; class=&quot;headerlink&quot; title=&quot;ãªãœHexoãªã®ã‹&quot;&gt;&lt;/a&gt;ãªãœHexoãªã®ã‹&lt;/h1&gt;&lt;ul&gt;
&lt;li&gt;Node.jsã§ã‚„ã‚Œã‚‹&lt;/li&gt;
&lt;li&gt;ã‚ã£ã¡ã‚ƒç°¡å˜ã«é™çš„ã‚µã‚¤ãƒˆã‚’æ§‹ç¯‰
    
    </summary>
    
    
      <category term="hexo" scheme="http://t-hiroyoshi.github.io/tags/hexo/"/>
    
      <category term="github" scheme="http://t-hiroyoshi.github.io/tags/github/"/>
    
      <category term="javascript" scheme="http://t-hiroyoshi.github.io/tags/javascript/"/>
    
  </entry>
  
</feed>
